class AetheriusBaseWeaponZSC : Weapon 
{
	// Spreader Aura Level 1 Angles
	const spread1angle1 = -15.0;
	const spread1angle2 = 15.0;
	const spread1horz1 = 0.0;
	const spread1horz2 = 0.0;
	const spread1height1 = 0.0;
	const spread1height2 = 0.0;

	// Spreader Aura Level 2 Angles/Pitches
	const spread2angle1 = -7.5;
	const spread2angle2 = 7.5;
	const spread2horz1 = 0.0;
	const spread2horz2 = 0.0;
	const spread2pitch1 = -7.5;
	const spread2pitch2 = 7.5;
	const spread2height1 = 0.0;
	const spread2height2 = 0.0;

	int finaldamagedealt;
	int finaldamagedealt2;
	int finaldamagedealt3;
	int finaldamagedealt4;
	int finalmeleedamagedealt;
	int finalmeleedamagedealt2;
	int finalmeleedamagedealt3;
	int finalmeleedamagedealt4;
	string attackname1, attackname2, attackname3, attackname4, attackname5;

	private class<Inventory> APPackToken, APPackCheck, APPackCheck2, APPackCheck3, APPackCheck4, iDTech1Check, iDTech1Check2, iDTech1Check3, iDTech1Check4;

	void A_GetPlayerAttackDamage(int type = 0, int puff = 0)
	{
		int debugplayeratkinfo = dvdsdebug_showplayeratkinformation;
		int flagchecktype = 0;
		int baserand1, baserand2;
		int damage, extradmg1, extradmg2, extradmg3, extradmg4, extradmg5, extradmg6, finaldmg;
		int rand1, rand2;
		double perkfactor = 1.00;
		double chargefactor = 1.00;
		int playershot = 0;
		int PlayerAGL = CallACS("MiscVarCheckDECORATE",31);
		int PlayerDEF = CallACS("MiscVarCheckDECORATE",32);
		int PlayerDFT = CallACS("MiscVarCheckDECORATE",33);
		int PlayerSOR = CallACS("MiscVarCheckDECORATE",34);
		int PlayerSTR = CallACS("MiscVarCheckDECORATE",35);
		int PlayerTHE = CallACS("MiscVarCheckDECORATE",36);
		int MagiUpPerkLevel = CallACS("MiscVarCheckDECORATE",10003);
		int MagiUpEXPerkLevel = CallACS("MiscVarCheckDECORATE",10004);
		int BulletAccuracyPerkLevel = CallACS("MiscVarCheckDECORATE",10019);
		int BulletAccuracyEXPerkLevel = CallACS("MiscVarCheckDECORATE",10020);
		int PelletAccuracyPerkLevel = CallACS("MiscVarCheckDECORATE",10021);
		int PelletAccuracyEXPerkLevel = CallACS("MiscVarCheckDECORATE",10022);
		int PlasmaAccuracyPerkLevel = CallACS("MiscVarCheckDECORATE",10023);
		int PlasmaAccuracyEXPerkLevel = CallACS("MiscVarCheckDECORATE",10024);
		int DemolitionsExpertPerkLevel = CallACS("MiscVarCheckDECORATE",10025);
		int DemolitionsExpertEXPerkLevel = CallACS("MiscVarCheckDECORATE",10026);
		int KarasawaAttunementPerkLevel = CallACS("MiscVarCheckDECORATE",10027);
		int KarasawaAttunementEXPerkLevel = CallACS("MiscVarCheckDECORATE",10028);
		int BFGAttunementPerkLevel = CallACS("MiscVarCheckDECORATE",10029);
		int BFGAttunementEXPerkLevel = CallACS("MiscVarCheckDECORATE",10030);
		int ArcheryMasteryPerkLevel = CallACS("MiscVarCheckDECORATE",10031);
		int ArcheryMasteryEXPerkLevel = CallACS("MiscVarCheckDECORATE",10032);
		int SoulMasteryPerkLevel = CallACS("MiscVarCheckDECORATE",10033);
		int SoulMasteryEXPerkLevel = CallACS("MiscVarCheckDECORATE",10034);
		int WandMasteryPerkLevel = CallACS("MiscVarCheckDECORATE",10053);
		int WandMasteryEXPerkLevel = CallACS("MiscVarCheckDECORATE",10054);
		int ismagicalatk;
		int isfirearmatk;
		int ishybridatk;

		perkfactor = 1.00;
		// Bullet
		if (type == 1 ||
				type == 2 ||
				type == 5 ||
				type == 6)
				perkfactor += ((BulletAccuracyPerkLevel * 0.02) + (BulletAccuracyEXPerkLevel * 0.10));
		// Pellet
		if (type == 3 || 
				type == 4)
				perkfactor += ((PelletAccuracyPerkLevel * 0.02) + (PelletAccuracyEXPerkLevel * 0.10));
		// Plasma
		if (type == 7 || 
				type == 10 || 
				type == 11 || 
				type == 12 || 
				type == 13 ||
				type == 48 ||
				type == 49 ||
				(type >= 53 && type <= 56) ||
				type == 58)
				perkfactor += ((PlasmaAccuracyPerkLevel * 0.02) + (PlasmaAccuracyEXPerkLevel * 0.10));
		// Demolition
		if (type == 8 || 
				type == 9)
				perkfactor += ((DemolitionsExpertPerkLevel * frandom(0.07,0.14)) + (DemolitionsExpertEXPerkLevel * frandom(0.07,0.14)));
		// Karasawa
		if (type == 16 || 
				type == 17)
				perkfactor += ((PlasmaAccuracyPerkLevel * 0.02) + (PlasmaAccuracyEXPerkLevel * 0.10));
				perkfactor += ((KarasawaAttunementPerkLevel * 0.5) + (KarasawaAttunementEXPerkLevel * 0.75));
		// BFG
		if (type == 12 || 
				type == 13 || 
				type == 14 || 
				type == 15)
				perkfactor += ((PlasmaAccuracyPerkLevel * 0.02) + (PlasmaAccuracyEXPerkLevel * 0.10));
				perkfactor += ((BFGAttunementPerkLevel * 0.025) + (BFGAttunementEXPerkLevel * 0.125));
		// Diaris Arrows
		if (type >= 18 && type <= 20)
				perkfactor += ((ArcheryMasteryPerkLevel * frandom(0.09,0.15)) + (BFGAttunementEXPerkLevel * frandom(0.36,0.60)));
		// Ethereal Crossbow
		if (type == 21 || 
				type == 22 || 
				type == 23)
				perkfactor += ((ArcheryMasteryPerkLevel * 0.06) + (BFGAttunementEXPerkLevel * 0.24));
		// Strife Crossbow
		if (type == 25 || 
				type == 26)
				perkfactor += ((ArcheryMasteryPerkLevel * 0.06) + (BFGAttunementEXPerkLevel * 0.24));
		// Heretic Magic Weapons
		if (type == 24 || 
				(type >= 27 && type <= 43))
				perkfactor += ((WandMasteryPerkLevel * 0.10) + (WandMasteryEXPerkLevel * 0.40));
		// Sapphire Wand(s) [Flora] & Serpent Staff(ves) [Ailish]
		if (type == 44 || 
				type == 45 ||
				type == 57)
				perkfactor += ((WandMasteryPerkLevel * 0.125) + (WandMasteryEXPerkLevel * 0.50));
		// Hubble Bubbles
		if (type == 46 || 
				type == 47)
				perkfactor += ((WandMasteryPerkLevel * 0.15) + (WandMasteryEXPerkLevel * 0.60));
		// Unmaker Lasers
		if (type == 50 || type == 51)
		{
				perkfactor += ((MagiUpPerkLevel * 0.075) + (MagiUpEXPerkLevel * 0.1875));
				perkfactor += ((SoulMasteryPerkLevel * 0.025) + (SoulMasteryEXPerkLevel * 0.125));
				perkfactor += ((WandMasteryPerkLevel * 0.05) + (WandMasteryEXPerkLevel * 0.25));
		}
		// Hell Warrior Shield Fireballs
		if (type == 52)
		{
				perkfactor += ((MagiUpPerkLevel * 0.075) + (MagiUpEXPerkLevel * 0.1875)); // MagiUp
				perkfactor += ((SoulMasteryPerkLevel * 0.05) + (SoulMasteryEXPerkLevel * 0.125)); // Soul Mastery
				perkfactor += ((WandMasteryPerkLevel * 0.05) + (WandMasteryEXPerkLevel * 0.125)); // Wand/Staff Mastery
		}
		
		
		// Main Definitions
		if (type == 1) // Pistol [Single]
		{
			damage = random(1,4) * random(5,7); // 5 to 28
			extradmg1 = PlayerAGL * 1.50; // 150% of Agility
			extradmg2 = PlayerSTR * 0.35; // 35% of Strength
		}
		if (type == 2) // Pistol [Dual]
		{
			damage = random(2,4) * random(6,7); // 12 to 28
			extradmg1 = PlayerAGL * 1.75; // 175% of Agility
			extradmg2 = PlayerSTR * 0.40; // 40% of Strength
		}
		if (type == 3) // Shotgun
		{
			damage = random(2,3) * 5; // 10 to 15
			extradmg1 = PlayerAGL * 2.00; // 200% of Agility
			extradmg2 = PlayerSTR * 0.175; // 17.5% of Strength
		}
		if (type == 4) // Super Shotgun
		{
			damage = random(2,3) * random(5,6); // 10 to 18
			extradmg1 = PlayerAGL * 2.50; // 175% of Agility
			extradmg2 = PlayerSTR * 0.25; // 25% of Strength
		}
		if (type == 5) // Chaingun
		{
			damage = random(2,4) * random(5,7); // 10 to 28
			extradmg1 = PlayerAGL * 1.75; // 175% of Agility
			extradmg2 = PlayerSTR * 0.40; // 40% of Strength 
		}
		if (type == 6) // Minigun
		{
			damage = random(3,4) * random(6,7); // 18 to 28
			extradmg1 = PlayerAGL * 2.00; // 175% of Agility
			extradmg2 = PlayerSTR * 0.50; // 40% of Strength 
		}
		if (type == 7) // Repeater
		{
			baserand1 = 1 + (PlasmaAccuracyPerkLevel * 0.50);
			baserand2 = 3 + PlasmaAccuracyPerkLevel + (PlasmaAccuracyEXPerkLevel * 1.50);
			
			damage = random(baserand1,baserand2) * 6; // 6 to 18
			extradmg1 = PlayerAGL * 3.00; // 300% of Agility
			extradmg2 = PlayerSTR * 0.75; // 75% of Strength 
		}
		if (type == 8) // Rocket/Grenade [main hit]
		{
			baserand1 = 1 + DemolitionsExpertPerkLevel;
			baserand2 = 8 + (DemolitionsExpertPerkLevel * 0.50) + (DemolitionsExpertEXPerkLevel * 1.25);
			
			damage = random(baserand1,baserand2) * 20; // 20 to 160
			extradmg1 = PlayerAGL * 2.50; // 250% of Agility
			extradmg2 = PlayerSTR * 1.125; // 112.5% of Strength 
		}
		if (type == 9) // Rocket/Grenade [explosion]
		{
			damage = 128 + (DemolitionsExpertPerkLevel * 12) + (DemolitionsExpertEXPerkLevel * 30);
			extradmg1 = PlayerAGL * 2.50; // 250% of Agility
			extradmg2 = PlayerSTR * 1.125; // 112.5% of Strength 
		}
		if (type == 10) // Repeater [explosion]
		{
			damage = 7 + (PlasmaAccuracyPerkLevel * 4) + (PlasmaAccuracyEXPerkLevel * 10); // 7
			extradmg1 = PlayerAGL * 0.40; // 40% of Agility
			extradmg2 = PlayerSTR * 0.1428282829; // 14.28~% of Strength 
		}

		if (type == 11) // Plasma
		{
			baserand1 = 1 + PlasmaAccuracyPerkLevel;
			baserand2 = 8 + (PlasmaAccuracyPerkLevel * 0.5) + (PlasmaAccuracyEXPerkLevel * 1.25);
			damage = random(baserand1,baserand2) * 5; // 5 to 40
			extradmg1 = PlayerAGL * 0.9334; // 93.34% of Agility
			extradmg2 = PlayerSTR * 0.45; // 45% of Strength 
		}
		if (type == 12) // Plasma1 [BFG2704]
		{
			baserand1 = 1 + PlasmaAccuracyPerkLevel;
			baserand2 = 8 + (PlasmaAccuracyPerkLevel * 0.5) + (PlasmaAccuracyEXPerkLevel * 1.25);
			damage = random(baserand1,baserand2) * 4; // 4 to 32
			extradmg1 = PlayerAGL * 1.00; // 100% of Agility
			extradmg2 = PlayerSTR * 0.55; // 55% of Strength 
		}
		if (type == 13) // Plasma2 [BFG2704]
		{
			baserand1 = 1 + PlasmaAccuracyPerkLevel;
			baserand2 = 8 + (PlasmaAccuracyPerkLevel * 0.5) + (PlasmaAccuracyEXPerkLevel * 1.25);
			damage = random(baserand1,baserand2) * 4; // 4 to 32
			extradmg1 = PlayerAGL * 1.10; // 110% of Agility
			extradmg2 = PlayerSTR * 0.50; // 50% of Strength 
		}

		if (type == 14) // BFG [Main]
		{
			baserand1 = (PlasmaAccuracyPerkLevel * 2);
			if (BFGAttunementPerkLevel <= 0) baserand1 += 2;
			if (BFGAttunementPerkLevel == 1) baserand1 += 4;
			if (BFGAttunementPerkLevel >= 2) baserand1 += 8;
			baserand2 = PlasmaAccuracyPerkLevel + (PlasmaAccuracyEXPerkLevel * 1.5);
			if (BFGAttunementPerkLevel <= 0) baserand2 += 16;
			if (BFGAttunementPerkLevel == 1) baserand2 += 17;
			if (BFGAttunementPerkLevel >= 2) baserand2 += 20;
			damage = random(baserand1,baserand2) * 50; // 100 to 800
			extradmg1 = (PlayerAGL * 11); // 1100% of Agility
			if (BFGAttunementPerkLevel == 1) extradmg1 = (PlayerAGL * 12); // 1200% of Agility
			if (BFGAttunementPerkLevel == 2) extradmg1 = (PlayerAGL * 15); // 1500% of Agility
			extradmg2 = (PlayerSTR * 5.5); // 550% of Strength 
			if (BFGAttunementPerkLevel == 1) extradmg2 = (PlayerSTR * 6); // 600% of Strength 
			if (BFGAttunementPerkLevel == 2) extradmg2 = (PlayerSTR * 7.5); // 750% of Strength 
		}
		if (type == 15) // BFG [Tracer]
		{
			baserand1 =( PlasmaAccuracyPerkLevel * 1.5);
			if (BFGAttunementPerkLevel <= 0) baserand1 += 1;
			if (BFGAttunementPerkLevel == 1) baserand1 += 2;
			if (BFGAttunementPerkLevel >= 2) baserand1 += 3;
			baserand2 = (PlasmaAccuracyPerkLevel * 0.75) + (PlasmaAccuracyEXPerkLevel * 1.375);
			if (BFGAttunementPerkLevel <= 0) baserand2 += 8;
			if (BFGAttunementPerkLevel == 1) baserand2 += 9;
			if (BFGAttunementPerkLevel >= 2) baserand2 += 10;
	
			damage = random(baserand1,baserand2) + 15; // 100 to 800
			if (BFGAttunementPerkLevel == 1) damage = random(baserand1,baserand2) + 18; // 20 to 37
			if (BFGAttunementPerkLevel == 2) damage = random(baserand1,baserand2) + 22; // 25 to 32
			extradmg1 = (PlayerAGL * 2.2); // 220% of Agility
			if (BFGAttunementPerkLevel == 1) extradmg1 = (PlayerAGL * 2.4); // 240% of Agility
			if (BFGAttunementPerkLevel == 2) extradmg1 = (PlayerAGL * 3); // 300% of Agility
			extradmg2 = (PlayerSTR * 1); // 100% of Strength 
			if (BFGAttunementPerkLevel == 1) extradmg2 = (PlayerSTR * 1.75); // 175% of Strength 
			if (BFGAttunementPerkLevel == 2) extradmg2 = (PlayerSTR * 2.5); // 250% of Strength 
		}
		if (type == 16 || type == 17) // KSawBolt
		{
			baserand1 = 1 + (PlasmaAccuracyPerkLevel * 0.5) + (PlasmaAccuracyEXPerkLevel * 1.25);
			baserand2 = 8 + (PlasmaAccuracyPerkLevel * 1.0) + (PlasmaAccuracyEXPerkLevel * 2.5);
			damage = random(baserand1,baserand2) * 15; // 15 to 120
			extradmg1 = (PlayerAGL * 4.4); // 440% of Agility
			extradmg2 = (PlayerSTR * 2); // 200% of Strength
		}
		if (type >= 18 && type <= 20) // DiarisHolyArrows
		{
			damage = 384 + random(-48,192); // 336 to 576 damage
			
			if (CountInv("LongbowZoom", AAPTR_PLAYER1) == 1) damage *= 1.5;
			if (CountInv("LongbowZoom", AAPTR_PLAYER1) == 2) damage *= 2.25;
			if (CountInv("LongbowZoom", AAPTR_PLAYER1) == 3) damage *= 3.375;
	
			if (type == 18) // DiarisHolyArrow [native]
			{
				extradmg1 = (PlayerAGL * 5); // 500% of Agility
				extradmg2 = (PlayerSTR * 0.4); // 40% of Strength 
			}
			if (type == 19) // DiarisHolyArrow2XDmg [native]
			{
				damage *= 2;
				extradmg1 = ((PlayerAGL * 6.25) * 2); // 625% of Agility
				extradmg2 = ((PlayerSTR * 0.5) * 2); // 50% of Strength 
			}
			if (type == 20) // DiarisHolyArrow3XDmg [native]
			{
				damage *= 3;
				extradmg1 = ((PlayerAGL * 7.5) * 3); // 750% of Agility
				extradmg2 = ((PlayerSTR * 0.6) * 3); // 60% of Strength 
			}
			
			damage /= 3;
			extradmg1 /= 3;
			extradmg2 /= 3;
		}
		if (type == 21) // CrossbowFX1New [HERETIC]
		{
			damage = 45 + random(-22,22); // 23 to 67 damage
			extradmg1 = (PlayerAGL * 2.50); // 250% of Agility
			extradmg2 = (PlayerSTR * 0.10); // 10% of Strength 
		}
		if (type == 22) // CrossbowFX2New [HERETIC]
		{
			damage = 27 + random(-13,13); // 14 to 40 damage
			extradmg1 = (PlayerAGL * 1.50); // 150% of Agility
			extradmg2 = (PlayerSTR * 0.06); // 6% of Strength 
		}
		if (type == 23) // CrossbowFX3New [HERETIC]
		{
			damage = 9 + random(-4,4); // 5 to 13 damage
			extradmg1 = (PlayerAGL * 0.50); // 50% of Agility
			extradmg2 = (PlayerSTR * 0.02); // 2% of Strength 
		}
		if (type == 24) // RipperNew [HERETIC] <MAGIC TYPE>
		{
			damage = 1 * random(1,8);
			extradmg1 = ((PlayerSOR * 0.125) * random(1,8)); // 12.5% of Sorcery
			extradmg2 = ((PlayerTHE * 0.0325) * random(1,8)); // 3.25% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 25) // ElectricBoltNew [STRIFE]
		{
			damage = 25 + random(-12,12); // 10 to 40 damage
			extradmg1 = (PlayerAGL * 4.0); // 400% of Agility
			extradmg2 = (PlayerSTR * 0.125); // 12.5% of Strength 
		}
		if (type == 26) // PoisonBoltNew [STRIFE]
		{
			damage = 25 + random(-12,12); // 10 to 40 damage
			extradmg1 = (PlayerAGL * 4.0); // 400% of Agility
			extradmg2 = (PlayerSTR * 0.125); // 12.5% of Strength 
		}
		if (type == 27) // BlasterPuffNew [HERETIC] <MAGIC TYPE>
		{
			damage = 18 + random(-9,9); // 4 to 32 damage
			extradmg1 = (PlayerSOR * 0.5); // 50% of Sorcery
			extradmg2 = (PlayerTHE * 0.125); // 12.5% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 28) // BlasterFX1New [HERETIC] <MAGIC TYPE>
		{
			damage = 9 + random(-4,4); // 2 to 16 damage
			extradmg1 = (PlayerSOR * 0.125); // 12.5% of Sorcery
			extradmg2 = (PlayerTHE * 0.0325); // 3.125% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 29) // GoldWandPuff1New [HERETIC] <MAGIC TYPE>
		{
			damage = 8 + random(3,6);
			extradmg1 = (PlayerSOR * 0.5); // 50% of Sorcery
			extradmg2 = (PlayerTHE * 0.2); // 20% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 30) // GoldWandPuff2New [HERETIC] <MAGIC TYPE>
		{
			damage = 5 + random(-3,3); // 1 to 8
			extradmg1 = (PlayerSOR * 0.3334); // 33.34% of Sorcery
			extradmg2 = (PlayerTHE * 0.13334); // 13.33~% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 31) // HornRodFX1New [HERETIC] <MAGIC TYPE>
		{
			damage = 14 + random(-7,8); // 7 to 22
			extradmg1 = (PlayerSOR * 0.1667); // 16.67% of Sorcery
			extradmg2 = (PlayerTHE * 0.041667); // 4.1667% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 32) // HornRodFX2New [HERETIC] <MAGIC TYPE>
		{
			damage = 45 + random(-22,22); // 10 to 80
			extradmg1 = (PlayerSOR * 0.3334); // 33.3% of Sorcery
			extradmg2 = (PlayerTHE * 0.141414); // 14.1414% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 33) // PhoenixFX1New [HERETIC] <MAGIC TYPE>
		{
			damage = 45 + random(-22,22); // 10 to 80
			extradmg1 = (PlayerSOR * 0.667); // 66.7% of Sorcery
			extradmg2 = (PlayerTHE * 0.28571); // 28.571% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 34) // PhoenixFX2New [HERETIC] <MAGIC TYPE>
		{
			damage = 9 + random(-4,4); // 2 to 16 damage
			extradmg1 = (PlayerSOR * 0.0667); // 6.7% of Sorcery
			extradmg2 = (PlayerTHE * 0.028571); // 2.8571% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 35) // MaceFX1New [HERETIC] <MAGIC TYPE>
		{
			damage = 9 + random(-4,4); // 2 to 16 damage
			extradmg1 = (PlayerSOR * 0.067); // 6.7% of Sorcery
			extradmg2 = (PlayerTHE * 0.027778); // 2.7778% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 36) // MaceFX2New [HERETIC] <MAGIC TYPE>
		{
			damage = 27 + random(-13,13); // 6 to 48
			extradmg1 = (PlayerSOR * 0.2); // 20% of Sorcery
			extradmg2 = (PlayerTHE * 0.0833); // 8.333% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 37) // MaceFX3New [HERETIC] <MAGIC TYPE>
		{
			damage = 18 + random(-9,9); // 4 to 32
			extradmg1 = (PlayerSOR * 0.10); // 10% of Sorcery
			extradmg2 = (PlayerTHE * 0.041666); // 4.1666% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 38) // MaceFX4New [HERETIC] <MAGIC TYPE>
		{
			damage = 96 + random(-48,-48); // 18 to 144
			extradmg1 = (PlayerSOR * 0.8333); // 83.333% of Sorcery
			extradmg2 = (PlayerTHE * 0.285714); // 28.5714% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 39) // Sorcerer2FX1Player [HERETIC] <MAGIC TYPE>
		{
			damage = 45 + random(-22,22); // 10 to 80
			extradmg1 = ((PlayerSOR * 3) / 2); // 150% of Sorcery
			extradmg2 = ((PlayerTHE * 4) / 7); // 57.142% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 40) // Sorcerer2FX3 [HERETIC] <MAGIC TYPE>
		{
			damage = 45 + random(-22,22); // 10 to 80
			extradmg1 = (PlayerSOR * 0.75); // 75% of Sorcery
			extradmg2 = (PlayerTHE * 0.285714); // 28.5714% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 41) // GoldWandFX1New [HERETIC] <MAGIC TYPE>
		{
			damage = 9 + random(-4,4); // 5 to 13 damage
			extradmg1 = (PlayerSOR * 0.3334); // 33.3% of Sorcery
			extradmg2 = (PlayerTHE * 0.1334); // 13.34% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 42) // GoldWandFX2New [HERETIC] <MAGIC TYPE>
		{
			damage = 5 + random(-3,3); // 2 to 8 damage
			extradmg1 = (PlayerSOR * 0.1667); // 16.67% of Sorcery
			extradmg2 = (PlayerTHE * 0.0667); // 6.67% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 43) // RainPillarNew [HERETIC] <MAGIC TYPE>
		{
			damage = 23 + random(-11,11); // 12 to 34 damage
			extradmg1 = (PlayerSOR * 0.1667); // 16.67% of Sorcery
			extradmg2 = (PlayerTHE * 0.0667); // 6.67% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 44 || type == 45) // MageWandMissileNew & MageWandMissile2New <MAGIC TYPE>
		{
			damage = (6 + random(-3,3)) + random(-WandMasteryPerkLevel,WandMasteryPerkLevel);
			extradmg1 = (PlayerSOR * 0.625); // 62.5% of Sorcery
			extradmg2 = (PlayerTHE * 0.1667); // 16.67% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 46) // HubbleBubbleSmall [main] <MAGIC TYPE>
		{
			damage = (10 + random(-3,4));
			extradmg1 = (PlayerSOR * 1.25); // 125% of Sorcery
			extradmg2 = (PlayerTHE * 0.380952); // 38.0952% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 47) // HubbleBubbleLarge [main] <MAGIC TYPE>
		{
			damage = (30 + random(-9,12));
			extradmg1 = (PlayerSOR * 3.75); // 375% of Sorcery
			extradmg2 = (PlayerTHE * 1.1428); // 114.28% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 48) // A. Christina Blast
		{
			damage = random(176,293); //234); //
			extradmg1 = (PlayerSOR * 3.0); // 300% of Sorcery
			extradmg2 = (PlayerSTR * 2.0); // 200% of Strength
		}
		if (type == 49) // A. Christina Long Range Blast (Weak)
		{
			damage = random(54,91); //125); //
			extradmg1 = (PlayerSOR * 3.0); // 300% of Sorcery
			extradmg2 = (PlayerSTR * 2.0); // 200% of Strength
		}
		if (type == 50) // Unmaker Laser (Marines & Petra)
		{
			damage = random(1,8) * 10; // 10 to 80
			extradmg1 = (PlayerAGL * 1.0); // 100% of Agility
			extradmg2 = (PlayerSTR * 0.5); // 50% of Strength 
		}
		if (type == 51) // Unmaker Laser (Flora & Ailish)
		{
			damage = random(1,8) * 10; // 10 to 80
			extradmg1 = (PlayerAGL * 1.0); // 100% of Agility
			extradmg2 = (PlayerSTR * 0.5); // 50% of Strength 
		}
		if (type == 52) // Hell Warrior Shield Fireball <MAGIC TYPE>
		{
			damage = random(1,8) * 2; // 2 to 16
			extradmg1 = (PlayerSOR * 0.8); // 80.0% of Sorcery
			extradmg2 = (PlayerTHE * 0.4); // 40.0% of Therapeusis 
			ismagicalatk = 1;
		}
		if (type == 53) // A. Christina Long Range Blast (Normal)
		{
			damage = random(136,228); //182); //
			extradmg1 = (PlayerSOR * 3.0); // 300% of Sorcery
			extradmg2 = (PlayerSTR * 2.0); // 200% of Strength
		}
		if (type == 54) // A. Christina Long Range Blast (Finale)
		{
			damage = random(340,570); //353); //
			extradmg1 = (PlayerSOR * 3.0); // 300% of Sorcery
			extradmg2 = (PlayerSTR * 2.0); // 200% of Strength
		}
		if (type == 55) // A. Christina Bouncing Shot (Weak)
		{
			damage = random(54,90) * 0.16667; //353); //
			extradmg1 = (PlayerSOR * 3.0); // 300% of Sorcery
			extradmg2 = (PlayerSTR * 2.0); // 200% of Strength
		}
		if (type == 56) // A. Christina Bouncing Shot (Normal)
		{
			damage = random(135,225) * 0.16667; //353); //
			extradmg1 = (PlayerSOR * 3.0); // 300% of Sorcery
			extradmg2 = (PlayerSTR * 2.0); // 200% of Strength
		}
		if (type == 57) // CStaffMissileNew (Serpent Staff projectile) <MAGIC TYPE>
		{
			damage = (random(1,8) * 5) + random(-WandMasteryPerkLevel,WandMasteryPerkLevel);
			extradmg1 = (PlayerSOR * 0.625); // 62.5% of Sorcery
			extradmg2 = (PlayerTHE * 0.1667); // 16.67% of Therapeusis
			ismagicalatk = 1;
		}
		if (type == 58) // Railgun [Player]
		{
			damage = random(9,11) * 5; // 45 to 55
			extradmg1 = (PlayerAGL * 3.75); // 375% of Agility
			extradmg2 = (PlayerSTR * 1.8); // 180% of Strength 
		
			chargefactor = (((CountInv("RailgunCharge", AAPTR_PLAYER1) * 2) + (CountInv("RailgunCharge", AAPTR_PLAYER1) * 0.3334)) * 0.10);
			damage = damage * chargefactor;
			extradmg1 *= chargefactor;
			extradmg2 *= chargefactor;
			playershot += 1;
		}
		
		
		
		
		if (!(type == 14 || type == 15))
		{
			if (damage > 0) damage *= perkfactor;
			if (extradmg1 > 0) extradmg1 *= perkfactor;
			if (extradmg2 > 0) extradmg2 *= perkfactor;
			if (extradmg3 > 0) extradmg3 *= perkfactor;
			if (extradmg4 > 0) extradmg4 *= perkfactor;
			if (extradmg5 > 0) extradmg5 *= perkfactor;
			if (extradmg6 > 0) extradmg6 *= perkfactor;
		}

		string actorname = GetClassName();
		AetheriusPlayerPawn playpawn;
		if (target) playpawn = AetheriusPlayerPawn(target);
		if (playpawn || puff == 1)
		{
			if (debugplayeratkinfo) Console.Printf("Player Shot: %s", actorname);
			
			if (type == 45) // Reduce Sapphire Alt-Fire damage by 33%
			{
				damage *= 0.667;
				extradmg1 *= 0.667;
				extradmg2 *= 0.667;
				extradmg3 *= 0.667;
				extradmg4 *= 0.667;
				extradmg5 *= 0.667;
				extradmg6 *= 0.667;
			}
			
			rand1 = (extradmg1 + extradmg2 + extradmg3 + extradmg4 + extradmg5 + extradmg6) * 0.75;
			rand2 = (extradmg1 + extradmg2 + extradmg3 + extradmg4 + extradmg5 + extradmg6) * 1.25;
			finaldmg = damage + random(rand1,rand2);
			
			int misc1 = 1000;
			if (ismagicalatk)
			{
				if (CountInv("EvenstarNecklace", AAPTR_PLAYER1) > 0) misc1 += 125;
				if (CountInv("BalrogRing", AAPTR_PLAYER1) > 0) misc1 += 125;
				finaldmg = (finaldmg * misc1) / 1000;
			}
			
			int misc2 = 1000;
			if (type == 52)
			{
				if (CountInv("SauronHelmet", AAPTR_PLAYER1) > 0) misc2 += 125;
				if (CountInv("SauronGauntletsItem", AAPTR_PLAYER1) > 0) misc2 += 125;
				if (CountInv("TheOneRing", AAPTR_PLAYER1) > 0) misc2 += 500;
				finaldmg = (finaldmg * misc2) / 1000;
			}

			if (debugplayeratkinfo) Console.Printf("Actor Class: %s, Type#: %d, Puff?: %d, Base Dmg: %d, Extra Dmg #1: %d, Extra Dmg #2: %d, Extra Dmg #3: %d, Extra Dmg #4: %d, Extra Dmg #5: %d, Extra Dmg #6: %d, Random: %d - %d, BaseRandom: %d - %d, Perkfactor: %8f, ChargeFactor: %8f, Misc1: %d, Misc2: %d, \cyFinal Damage: %d\c-", 
											 												actorname, type, puff,
																							damage, extradmg1, extradmg2, extradmg3, extradmg4, extradmg5, extradmg6,
																							rand1, rand2,
																							baserand1, baserand2,
																							perkfactor, chargefactor,
																							misc1, misc2,
																							finaldmg);
		}
		else
		{
			if (debugplayeratkinfo) Console.Printf("Non-Player Shot: %s", actorname);
			finaldmg = damage;
			
			if (debugplayeratkinfo) Console.Printf("Actor Class: %s, Type#: %d, Puff?: %d, Base Dmg: %d, \cyFinal Damage: %d\c-", 
																							actorname, type, puff,
																							damage, finaldmg);
		}
		
		if (CallACS("MiscVarCheckDECORATE",166) > 0)
		{
			int preboostdmg = finaldmg;
			finaldmg *= frandom(1.05,1.15);
			if (debugplayeratkinfo) Console.Printf("[Dash] PreBoost: %d, Total: %d", preboostdmg, finaldmg);
		}
		
		A_SetInventory("FinalDamageDealt",finaldmg,AAPTR_PLAYER1,true);
	}

	void A_GetPunchDamage(int altfire = 0, int shockwave = 0)
	{
		let weapon = player.ReadyWeapon;
		string weaponname = weapon.GetClassName();
		string actorname = GetClassName();
		int damage;
		int previousdamage;
		int strengthcounter;
		int CharacterClass = CallACS("CheckCharacterClass");
		int debugmelee = dvdsdebug_showmeleeinformation;
		String nm, nn, no, np;
		nm = "FistAilish"; APPackCheck = nm;
		nn = "FistPetra"; APPackCheck2 = nn;
		no = "SauronGauntletsAilish"; APPackCheck3 = no;
		np = "SauronGauntletsPetra"; APPackCheck4 = np;

		// Character Check [base damage]
		If (weapon is "FistDeggaris" || weapon is "FistIllucia" || weapon is "FistFlora" || weapon is nm || weapon is nn)
		{
			if (altfire == 0)
			{
				if (CharacterClass == 0) damage = random(18,24);
				if (CharacterClass == 1) damage = random(10,16);
				if (CharacterClass == 2) damage = random(6,12);
				if (CharacterClass == 9) damage = random(6,12);
			}
			else
			if (altfire == 1)
			{
				if (CharacterClass == 0) damage = random(126,148);
				if (CharacterClass == 1) damage = random(70,112);
				if (CharacterClass == 2) damage = random(42,84);
				if (CharacterClass == 9) damage = random(42,84);
			}
		}
		else
		{
			if (CharacterClass == 0) damage = random(18,24);
			if (CharacterClass == 1) damage = random(10,16);
			if (CharacterClass == 2) damage = random(6,12);
			if (CharacterClass == 9) damage = random(6,12);
		}
		if (debugmelee) Console.Printf("BaseDmg: %d", damage);

		// Gauntlet Check #1 [base damage]
		previousdamage = damage;
		If (weapon is "SauronGauntlets" || weapon is "SauronGauntletsIllucia" || weapon is "SauronGauntletsFlora" || weapon is no || weapon is np)
		{
			if (CharacterClass == 0) damage += random(14,18);
			if (CharacterClass == 1) damage += random(10,14);
			if (CharacterClass == 2) damage += random(8,12);
			if (CharacterClass == 9) damage += random(8,12);

			if (debugmelee) Console.Printf("GauntDmg: %d - (Previous Dmg: %d)", damage, previousdamage);
		}
		
		// [STRIFE] Stamina Upgrades
		int stamdamagefactor = CallACS("MiscVarCheckDECORATE",317);
		previousdamage = damage;
		damage = (damage * (2 + stamdamagefactor) / 2);
		if (debugmelee) Console.Printf("StaminaDmg: %d, StamUpgrades: %d - (Previous Dmg: %d)", damage, stamdamagefactor, previousdamage);

		// Strength Stat Check [7 pts = roughly double the character's base punch damage]
		int PlayerSTR = CallACS("StatCheck",7);
		previousdamage = damage;
		for (strengthcounter = 0; strengthcounter < PlayerSTR; strengthcounter++)
		{
			If (weapon is "FistDeggaris" || weapon is "FistIllucia" || weapon is "FistFlora" || weapon is nm || weapon is nn)
			{
				if (altfire == 0)
				{
					if (CharacterClass == 0) damage += random(1,3);
					if (CharacterClass == 1) damage += random(1,2);
					if (CharacterClass == 2) damage += random(0,2);
					if (CharacterClass == 9) damage += random(0,2);
				}
				if (altfire == 1)
				{
					if (CharacterClass == 0) damage += random(8,12);
					if (CharacterClass == 1) damage += random(8,11);
					if (CharacterClass == 2) damage += random(6,10);
					if (CharacterClass == 9) damage += random(6,10);
				}
			}
			else
			{
				if (CharacterClass == 0) damage += random(1,3);
				if (CharacterClass == 1) damage += random(1,2);
				if (CharacterClass == 2) damage += random(0,2);
				if (CharacterClass == 9) damage += random(0,2);
			}
		}
		if (debugmelee) Console.Printf("StrDmg: %d - (Strength: %d) - (Previous Dmg: %d)", damage, PlayerSTR, previousdamage);
		
		// Gauntlet Check #2 [strength stat check] [7 pts = roughly double the character's base gauntlet punch damage]
		previousdamage = damage;
		If (weapon is "SauronGauntlets" || weapon is "SauronGauntletsIllucia" || weapon is "SauronGauntletsFlora" || weapon is no || weapon is np)
		{
			for (strengthcounter = 0; strengthcounter < PlayerSTR; strengthcounter++)
			{
				if (CharacterClass == 0) damage += random(2,3);
				if (CharacterClass == 1) damage += random(1,3);
				if (CharacterClass == 2) damage += random(1,2);
				if (CharacterClass == 9) damage += random(1,2);
			}
			if (debugmelee) Console.Printf("Gaunt2Dmg: %d - (Strength: %d) - (Previous Dmg: %d)", damage, PlayerSTR, previousdamage);
		}
	
		// Berserk Check
		previousdamage = damage;
		if (CountInv("PowerStrength", AAPTR_PLAYER1) > 0) damage = damage * 10;
		if (debugmelee) Console.Printf("BerserkDmg: %d - (Previous Dmg: %d)", damage, previousdamage);
		
		// Flora Armor Checks
		previousdamage = damage;
		if (CharacterClass == 2) 
		{
			if (CountInv("FalconKnifeEarrings", AAPTR_PLAYER1) > 0) Damage = Damage * 4 / 3; // +33.3~% Punch Damage
			if (CountInv("AnubisCufflinks", AAPTR_PLAYER1) > 0) Damage = Damage * 7 / 4; // +75% Punch Damage
			if (debugmelee) Console.Printf("FloArmorDmg: %d - (Previous Dmg: %d)", damage, previousdamage);
		}
	
		// Gauntlet Check #3
		previousdamage = damage;
		If (weapon is "SauronGauntlets" || weapon is "SauronGauntletsIllucia" || weapon is "SauronGauntletsFlora" || weapon is no || weapon is np)
		{
			if (altfire == 0) damage *= 10;
			if (altfire == 1) damage *= 25;
			if (debugmelee) Console.Printf("Gaunt3Dmg: %d - (Strength: %d) - (Previous Dmg: %d)", damage, PlayerSTR, previousdamage);
		}
		
		int PerkFactor;
		int temp1, temp2;
		
		int MartialArtsMastery = CallACS("MiscVarCheckDECORATE",10035);
		int MartialArtsMasteryEX = CallACS("MiscVarCheckDECORATE",10036);
		previousdamage = damage;
		if (shockwave > 0)
		{
			if (altfire == 0) damage = damage / 6;
			if (altfire == 1) damage = damage / 5;
			if (debugmelee) Console.Printf("MeleeDmg [Shockwave]: (%s) %d - (Previous Dmg: %d [Martial Arts Mastery Perk (Shockwave) (Lvl: %d + %d)]", weaponname, damage, previousdamage, MartialArtsMastery, MartialArtsMasteryEX);

			previousdamage = damage;
			if (MartialArtsMastery > 0)
			{
				temp1 = 0;
				if (MartialArtsMastery == 1) temp1 = 75;
				if (MartialArtsMastery == 2) temp1 = 225;
				if (MartialArtsMastery == 3) temp1 = 525;
				if (MartialArtsMastery == 4) temp1 = 1125;
				if (MartialArtsMastery >= 5) temp1 = 3375;
				temp2 = 0;
				if (MartialArtsMasteryEX == 1) temp2 = 1500;
				if (MartialArtsMasteryEX == 2) temp2 = 3000;
				PerkFactor = 1000 + (temp1 + temp2);
				damage = damage * PerkFactor / 1000;
				if (debugmelee) Console.Printf("MeleeDmg [Shockwave]: (%s) %d - (Previous Dmg: %d [Martial Arts Mastery Perk (Shockwave) (Lvl: %d + %d)]", weaponname, damage, previousdamage, MartialArtsMastery, MartialArtsMasteryEX);
			}
		}
		else
		{
			previousdamage = damage;
			if (MartialArtsMastery > 0)
			{
				temp1 = 0;
				if (MartialArtsMastery == 1) temp1 = 25;
				if (MartialArtsMastery == 2) temp1 = 75;
				if (MartialArtsMastery == 3) temp1 = 175;
				if (MartialArtsMastery == 4) temp1 = 375;
				if (MartialArtsMastery >= 5) temp1 = 1125;
				temp2 = 0;
				if (MartialArtsMasteryEX == 1) temp2 = 500;
				if (MartialArtsMasteryEX == 2) temp2 = 1000;
				PerkFactor = 1000 + (temp1 + temp2);
				damage = damage * PerkFactor / 1000;
				if (debugmelee) Console.Printf("MeleeDmg: (%s) %d - (Previous Dmg: %d [Martial Arts Mastery Perk (Lvl: %d + %d)]", weaponname, damage, previousdamage, MartialArtsMastery, MartialArtsMasteryEX);
			}
		}
		
		previousdamage = damage;
		If (weapon is "FistDeggaris" || weapon is "FistIllucia" || weapon is "FistFlora" || weapon is nm || weapon is nn)
		{
			if (altfire == 0) damage = damage;
			//if (altfire == 1) damage = damage / 4;
		}
		
		if (debugmelee && altfire == 0) Console.Printf("MeleeDmgAltCheck: (%s) %d - (Previous Dmg: %d) [Punch]", weaponname, damage, previousdamage);
		if (debugmelee && altfire == 1) Console.Printf("MeleeDmgAltCheck: (%s) %d - (Previous Dmg: %d) [Uppercut]", weaponname, damage, previousdamage);
		
		// StamUp Check
		previousdamage = damage;
		int StamUpPerkLevel = CallACS("MiscVarCheckDECORATE",10005);
		int StamUpEXPerkLevel = CallACS("MiscVarCheckDECORATE",10006);
		if (StamUpPerkLevel > 0)
		{
			PerkFactor = ((StamUpPerkLevel * 30) + (StamUpEXPerkLevel * 75)) + 400;
			damage = damage * PerkFactor / 400;
		}
		
		if (debugmelee && altfire == 0) Console.Printf("FinalMeleeDmg: (Weapon: %s - Source: %s) %d - (Previous Dmg: %d) [Punch]", weaponname, actorname, damage, previousdamage);
		if (debugmelee && altfire == 1) Console.Printf("FinalMeleeDmg: (Weapon: %s - Source: %s) %d - (Previous Dmg: %d) [Uppercut]", weaponname, actorname, damage, previousdamage);

		A_SetInventory("FinalMeleeDamageDealt",damage,AAPTR_PLAYER1,true);
		finalmeleedamagedealt = damage;
	}

	void A_GetKickDamage(int altfire = 0, int shockwave = 0)
	{
		let weapon = player.ReadyWeapon;
		string weaponname = weapon.GetClassName();
		string actorname = GetClassName();
		int damage;
		int previousdamage;
		int strengthcounter;
		int CharacterClass = CallACS("CheckCharacterClass");
		int debugmelee = dvdsdebug_showmeleeinformation;
		
		if (CharacterClass == 0) damage = random(45,60); // 2.5x
		if (CharacterClass == 1) damage = random(25,40); // 2.5x
		if (CharacterClass == 2) damage = random(26,51); // 4.25x
		if (CharacterClass == 9) damage = random(35,60); // 
		if (debugmelee) Console.Printf("BaseDmg: %d", damage);

		// [STRIFE] Stamina Upgrades
		int stamdamagefactor = CallACS("MiscVarCheckDECORATE",317);
		previousdamage = damage;
		damage = (damage * (4 + (stamdamagefactor * 3)) / 4);
		if (debugmelee) Console.Printf("StaminaDmg: %d, StamUpgrades: %d - (Previous Dmg: %d)", damage, stamdamagefactor, previousdamage);
		
		// Strength Stat Check [7 pts = roughly double the character's base punch damage]
		int PlayerSTR = CallACS("StatCheck",7);
		previousdamage = damage;
		for (strengthcounter = 0; strengthcounter < PlayerSTR; strengthcounter++)
		{
			if (CharacterClass == 0) damage += random(2,8); // 2.5x
			if (CharacterClass == 1) damage += random(2,5); // 2.5x
			if (CharacterClass == 2) damage += random(3,9); // 4.25x
			if (CharacterClass == 9) damage += random(4,12); //
		}
		if (debugmelee) Console.Printf("StrDmg: %d - (Strength: %d) - (Previous Dmg: %d)", damage, PlayerSTR, previousdamage);
	
		// Reduce Check
		previousdamage = damage;
		if (altfire == 0) damage = (damage * random(5,6)) / 5;
		if (debugmelee) Console.Printf("ReduceDmg: %d - (Previous Dmg: %d)", damage, previousdamage);
	
		// Berserk Check
		previousdamage = damage;
		if (CountInv("PowerStrength", AAPTR_PLAYER1) > 0) damage = damage * 10;
		if (debugmelee) Console.Printf("BerserkDmg: %d - (Previous Dmg: %d)", damage, previousdamage);
		
		// Flora Armor Checks
		previousdamage = damage;
		if (CharacterClass == 2) 
		{
			if (CountInv("FalconKnifeEarrings", AAPTR_PLAYER1) > 0) Damage = Damage * 4 / 3; // +33.3~% Kick Damage
			if (CountInv("SafeTeaShoes", AAPTR_PLAYER1) > 0) Damage = Damage * 7 / 4; // +75% Kick Damage
			if (debugmelee) Console.Printf("FloArmorDmg: %d - (Previous Dmg: %d)", damage, previousdamage);
		}
		
		int PerkFactor;
		int temp1, temp2;
		
		int MartialArtsMastery = CallACS("MiscVarCheckDECORATE",10035);
		int MartialArtsMasteryEX = CallACS("MiscVarCheckDECORATE",10036);
		previousdamage = damage;
		if (shockwave > 0)
		{
			if (altfire == 0) damage = damage / 6;
			if (altfire == 1) damage = damage / 5;
			if (debugmelee) Console.Printf("MeleeDmg [Shockwave]: (%s) %d - (Previous Dmg: %d [Martial Arts Mastery Perk (Shockwave) (Lvl: %d + %d)]", weaponname, damage, previousdamage, MartialArtsMastery, MartialArtsMasteryEX);

			previousdamage = damage;
			if (MartialArtsMastery > 0)
			{
				temp1 = 0;
				if (MartialArtsMastery == 1) temp1 = 75;
				if (MartialArtsMastery == 2) temp1 = 225;
				if (MartialArtsMastery == 3) temp1 = 525;
				if (MartialArtsMastery == 4) temp1 = 1125;
				if (MartialArtsMastery >= 5) temp1 = 3375;
				temp2 = 0;
				if (MartialArtsMasteryEX == 1) temp2 = 1500;
				if (MartialArtsMasteryEX == 2) temp2 = 3000;
				PerkFactor = 1000 + (temp1 + temp2);
				damage = damage * PerkFactor / 1000;
				if (debugmelee) Console.Printf("MeleeDmg [Shockwave]: (%s) %d - (Previous Dmg: %d [Martial Arts Mastery Perk (Shockwave) (Lvl: %d + %d)]", weaponname, damage, previousdamage, MartialArtsMastery, MartialArtsMasteryEX);
			}
		}
		else
		{
			previousdamage = damage;
			if (MartialArtsMastery > 0)
			{
				temp1 = 0;
				if (MartialArtsMastery == 1) temp1 = 25;
				if (MartialArtsMastery == 2) temp1 = 75;
				if (MartialArtsMastery == 3) temp1 = 175;
				if (MartialArtsMastery == 4) temp1 = 375;
				if (MartialArtsMastery >= 5) temp1 = 1125;
				temp2 = 0;
				if (MartialArtsMasteryEX == 1) temp2 = 500;
				if (MartialArtsMasteryEX == 2) temp2 = 1000;
				PerkFactor = 1000 + (temp1 + temp2);
				damage = damage * PerkFactor / 1000;
				if (debugmelee) Console.Printf("MeleeDmg: (%s) %d - (Previous Dmg: %d [Martial Arts Mastery Perk (Lvl: %d + %d)]", weaponname, damage, previousdamage, MartialArtsMastery, MartialArtsMasteryEX);
			}
		}
		
		previousdamage = damage;
		if (altfire == 0) damage = damage;
		if (altfire == 1) damage = damage / 4;
		if (debugmelee && altfire == 0) Console.Printf("MeleeDmgAltCheck: (%s) %d - (Previous Dmg: %d) [Kick]", weaponname, damage, previousdamage);
		if (debugmelee && altfire == 1) Console.Printf("MeleeDmgAltCheck: (%s) %d - (Previous Dmg: %d) [Roundhouse Kick]", weaponname, damage, previousdamage);
		
		// StamUp Check
		previousdamage = damage;
		int StamUpPerkLevel = CallACS("MiscVarCheckDECORATE",10005);
		int StamUpEXPerkLevel = CallACS("MiscVarCheckDECORATE",10006);
		if (StamUpPerkLevel > 0)
		{
			PerkFactor = ((StamUpPerkLevel * 30) + (StamUpEXPerkLevel * 75)) + 400;
			damage = damage * PerkFactor / 400;
		}
		
		if (debugmelee && altfire == 0) Console.Printf("FinalMeleeDmg: (Weapon: %s - Source: %s) %d - (Previous Dmg: %d) [Kick]", weaponname, actorname, damage, previousdamage);
		if (debugmelee && altfire == 1) Console.Printf("FinalMeleeDmg: (Weapon: %s - Source: %s) %d - (Previous Dmg: %d) [Roundhouse Kick]", weaponname, actorname, damage, previousdamage);

		A_SetInventory("FinalMeleeDamageDealt",damage,AAPTR_PLAYER1,true);
		finalmeleedamagedealt = damage;
	}

	void A_GetSceptreDamage(int attacktype = 0, int attacklevel = 0, int shockwave = 0)
	{
		let weapon = player.ReadyWeapon;
		string weaponname = weapon.GetClassName();
		string actorname = GetClassName();
		int damage;
		int previousdamage;
		int strengthcounter;
		int sceptrestrbase;
		int sceptrestrmin;
		int sceptrestrmax;
		int PerkFactor;
		int SceptreActualLevel = CallACS("OtherVarCheckDECORATE",11);
		int CharacterClass = CallACS("CheckCharacterClass");
		int debugmelee = dvdsdebug_showmeleeinformation;
		
		if (SceptreActualLevel <= 0) damage = random(275,325); // Base Damage Range
		if (SceptreActualLevel == 1) damage = random(280,330); // +5 Damage Range
		if (SceptreActualLevel == 2) damage = random(290,340); // +10 Damage Range
		if (SceptreActualLevel == 3) damage = random(320,370); // +30 Damage Range
		if (SceptreActualLevel == 4) damage = random(340,390); // +20 Damage Range
		if (SceptreActualLevel == 5) damage = random(365,415); // +25 Damage Range
		if (SceptreActualLevel == 6) damage = random(425,475); // +60 Damage Range
		if (SceptreActualLevel == 7) damage = random(425,475); // +0 Damage Range
		if (SceptreActualLevel == 8) damage = random(545,595); // +120 Damage Range
		if (SceptreActualLevel == 9) damage = random(590,640); // +45 Damage Range
		if (SceptreActualLevel == 10) damage = random(640,690); // +50 Damage Range
		if (SceptreActualLevel == 11) damage = random(750,800); // +110 Damage Range
		if (SceptreActualLevel == 12) damage = random(810,860); // +60 Damage Range
		if (SceptreActualLevel == 13) damage = random(875,925); // +65 Damage Range
		if (SceptreActualLevel == 14) damage = random(1015,1065); // +140 Damage Range
		if (SceptreActualLevel == 15) damage = random(1015,1065); // +0 Damage Range
		if (SceptreActualLevel >= 16) damage = random(1255,1305); // +240 Damage Range
		if (debugmelee) Console.Printf("BaseDmg: %d", damage);

		// [STRIFE] Stamina Upgrades
		int stamdamagefactor = CallACS("MiscVarCheckDECORATE",317);
		previousdamage = damage;
		damage = (damage * (4 + stamdamagefactor) / 4);
		if (debugmelee) Console.Printf("StaminaDmg: %d, StamUpgrades: %d - (Previous Dmg: %d)", damage, stamdamagefactor, previousdamage);
		
		// Strength Stat Check [7 pts = roughly double the character's base punch damage]
		int PlayerSTR = CallACS("StatCheck",7);
		previousdamage = damage;
		for (strengthcounter = 0; strengthcounter < PlayerSTR; strengthcounter++)
		{
			sceptrestrbase = ((SceptreActualLevel * (4 + (PlayerSTR / 32))) + (16 + (SceptreActualLevel * (2 + (PlayerSTR / 64)))));
			sceptrestrmin = sceptrestrbase - (16 + (SceptreActualLevel * (2 + (PlayerSTR / 64))));
			sceptrestrmax = sceptrestrbase + (16 + (SceptreActualLevel * (2 + (PlayerSTR / 64)))); 

			if (debugmelee) Console.Printf("StrBase: %d, StrMin: %d, StrMax: %d", sceptrestrbase, sceptrestrmin, sceptrestrmax);

			damage += random(sceptrestrmin,sceptrestrmax);
		}
		if (debugmelee) Console.Printf("StrDmg: %d - (Strength: %d) - (Previous Dmg: %d)", damage, PlayerSTR, previousdamage);
		
		if (attacktype == 1) damage = damage * 5 / 2; // If performing the Aireal Attack
		if (attacktype == 2)
		{
			if (attacklevel < 0)
			{
				if (SceptreActualLevel <= 0) attacklevel = 0;
				if (SceptreActualLevel == 1) attacklevel = 0;
				if (SceptreActualLevel == 2) attacklevel = 0;
				if (SceptreActualLevel == 3) attacklevel = 0;
				if (SceptreActualLevel == 4) attacklevel = 0;
				if (SceptreActualLevel == 5) attacklevel = 1;
				if (SceptreActualLevel == 6) attacklevel = 1;
				if (SceptreActualLevel == 7) attacklevel = 1;
				if (SceptreActualLevel == 8) attacklevel = 1;
				if (SceptreActualLevel == 9) attacklevel = 1;
				if (SceptreActualLevel == 10) attacklevel = 2;
				if (SceptreActualLevel == 11) attacklevel = 2;
				if (SceptreActualLevel == 12) attacklevel = 2;
				if (SceptreActualLevel == 13) attacklevel = 2;
				if (SceptreActualLevel == 14) attacklevel = 2;
				if (SceptreActualLevel == 15) attacklevel = 3;
				if (SceptreActualLevel >= 16) attacklevel = 3;
			}
		
			if (attacklevel == 0) damage = damage / 2; // If performing the Spinning Attack [50%]
			else if (attacklevel == 1) damage = damage * 3 / 4; // If performing the Spinning Attack [75%]
			else if (attacklevel == 2) damage = damage * 7 / 8; // If performing the Spinning Attack [87.5%]
			else if (attacklevel == 3) damage = damage * 15 / 16; // If performing the Spinning Attack [93.25%]
		
			damage = damage / 4;
		}
		if (debugmelee) Console.Printf("BaseDmg: %d", damage);
		
		// Berserk Check
		previousdamage = damage;
		if (CountInv("PowerStrength", AAPTR_PLAYER1) > 0) damage = damage * 10;
		if (debugmelee) Console.Printf("BerserkDmg: %d - (Previous Dmg: %d)", damage, previousdamage);
		
		if (shockwave == 1) damage = damage / 6;
		if (debugmelee) Console.Printf("ShockWave: (%s) %d", weaponname, damage);
		
		// StamUp Check
		previousdamage = damage;
		int StamUpPerkLevel = CallACS("MiscVarCheckDECORATE",10005);
		int StamUpEXPerkLevel = CallACS("MiscVarCheckDECORATE",10006);
		if (StamUpPerkLevel > 0)
		{
			PerkFactor = ((StamUpPerkLevel * 30) + (StamUpEXPerkLevel * 75)) + 400;
			damage = damage * PerkFactor / 400;
		}

		if (debugmelee) Console.Printf("FinalMeleeDmg: (Weapon: %s - Source: %s) %d - (Previous Dmg: %d) [Sceptre]", weaponname, actorname, damage, previousdamage);
		A_SetInventory("FinalMeleeDamageDealt",damage,AAPTR_PLAYER1,true);
		finalmeleedamagedealt = damage;
	}

	void A_GetChainsawDamage(int sawtype)
	{
		let weapon = player.ReadyWeapon;
		string weaponname = weapon.GetClassName();
		string actorname = GetClassName();
		int damage;
		int previousdamage;
		int PerkFactor;
		int PlayerSTR = CallACS("StatCheck",7);
		int debugmelee = dvdsdebug_showmeleeinformation;
		
		if (sawtype <= 1) // Normal Chainsaw
		{
			damage = ((2 + (PlayerSTR / 10)) * random(1,10)); // 2 - 20 + (Strength * 10%)
		}
		if (sawtype >= 2) // Double-Bladed Chainsaw
		{
			damage = (((9 / 2) + (PlayerSTR * 9 / 40)) * random(3,12)); // 13.5 - 54 + (Strength * 22.5%)
		}
		if (debugmelee) Console.Printf("BaseDmg: %d", damage);
		
		// [STRIFE] Stamina Upgrades
		int stamdamagefactor = CallACS("MiscVarCheckDECORATE",317);
		previousdamage = damage;
		damage = (damage * (3 + stamdamagefactor) / 3);
		if (debugmelee) Console.Printf("StaminaDmg: %d, StamUpgrades: %d - (Previous Dmg: %d)", damage, stamdamagefactor, previousdamage);
		
		// Berserk Check
		previousdamage = damage;
		if (CountInv("PowerStrength", AAPTR_PLAYER1) > 0) damage = damage * 7 / 4; // 175% Damage when Berserked
		if (debugmelee) Console.Printf("BerserkDmg: %d - (Previous Dmg: %d)", damage, previousdamage);
		
		// StamUp Check
		previousdamage = damage;
		int StamUpPerkLevel = CallACS("MiscVarCheckDECORATE",10005);
		int StamUpEXPerkLevel = CallACS("MiscVarCheckDECORATE",10006);
		if (StamUpPerkLevel > 0)
		{
			PerkFactor = ((StamUpPerkLevel * 30) + (StamUpEXPerkLevel * 75)) + 400;
			damage = damage * PerkFactor / 400;
		}

		if (debugmelee) Console.Printf("FinalMeleeDmg: (Weapon: %s - Source: %s) %d - (Previous Dmg: %d) [Chainsaw]", weaponname, actorname, damage, previousdamage);
		
		A_SetInventory("FinalMeleeDamageDealt",damage,AAPTR_PLAYER1,true);
		finalmeleedamagedealt = damage;
	}
	
	// Sceptre Twirl Mana/MP Check [to "balance" sceptre alt-fire cheapness >.>]
	void A_SceptreTwirlManaCheck(int attacktype) 
	{
		int HaveMana, ManaCost;
		int SceptreActualLevel = CallACS("OtherVarCheckDECORATE",11);
		int SceptreTimer = CallACS("MiscVarCheckDECORATE",16);

		int SceptreTimerLimit = 10;
		if (SceptreActualLevel == 0) SceptreTimerLimit = 10;
		if (SceptreActualLevel == 1) SceptreTimerLimit = 10;
		if (SceptreActualLevel == 2) SceptreTimerLimit = 11;
		if (SceptreActualLevel == 3) SceptreTimerLimit = 11;
		if (SceptreActualLevel == 4) SceptreTimerLimit = 12;
		if (SceptreActualLevel == 5) SceptreTimerLimit = 12;
		if (SceptreActualLevel == 6) SceptreTimerLimit = 13;
		if (SceptreActualLevel == 7) SceptreTimerLimit = 14;
		if (SceptreActualLevel == 8) SceptreTimerLimit = 14;
		if (SceptreActualLevel == 9) SceptreTimerLimit = 15;
		if (SceptreActualLevel == 10) SceptreTimerLimit = 16;
		if (SceptreActualLevel == 11) SceptreTimerLimit = 16;
		if (SceptreActualLevel == 12) SceptreTimerLimit = 17;
		if (SceptreActualLevel == 13) SceptreTimerLimit = 18;
		if (SceptreActualLevel == 14) SceptreTimerLimit = 19;
		if (SceptreActualLevel == 15) SceptreTimerLimit = 20;
		if (SceptreActualLevel == 16) SceptreTimerLimit = 22;
		
		int CurrentMana = CallACS("StatCheck",14); 
		if (attacktype == 1)
		{
			if (SceptreActualLevel <= 4 && CurrentMana >= 5) { CurrentMana -= 5; HaveMana++; }
			if (SceptreActualLevel > 4 && SceptreActualLevel <= 8 && CurrentMana >= 4 ) { CurrentMana -= 4; HaveMana++; }
			if (SceptreActualLevel > 8 && SceptreActualLevel <= 12 && CurrentMana >= 3 ) { CurrentMana -= 3; HaveMana++; }
			if (SceptreActualLevel > 12 && SceptreActualLevel <= 16 && CurrentMana >= 2 ) { CurrentMana -= 2; HaveMana++; }
			if (SceptreActualLevel == 16 && CurrentMana >= 1) { CurrentMana -= 1; HaveMana++; }
			if (CurrentMana < 0) CurrentMana = 0;
			CallACS("MiscVarSetDECORATE",243,CurrentMana);
			CallACS("MiscVarSetDECORATE",238,CurrentMana);
		}
		else
		{
			if (CurrentMana > 0) HaveMana++;
			if (random(1,16) == 1) SceptreTimer += 2; else SceptreTimer += 1;
			//Print(d:SceptreTimer);
			if (SceptreTimer >= SceptreTimerLimit)
			{
				ManaCost = random(1,2);
				if (SceptreActualLevel < 8 ) CurrentMana -= 2;
				if (SceptreActualLevel > 8 && SceptreActualLevel < 16) CurrentMana -= ManaCost; HaveMana++;
				if (SceptreActualLevel == 16) CurrentMana -= 1; HaveMana++;
				if (CurrentMana < 0) CurrentMana = 0;

				CallACS("MiscVarSetDECORATE",16,SceptreTimerLimit,2);
				CallACS("MiscVarSetDECORATE",243,CurrentMana);
				CallACS("MiscVarSetDECORATE",238,CurrentMana);
			}
		}
		
		//Print(d:HaveMana);
		if (HaveMana > 0) A_SetInventory("StamUsed",1,AAPTR_PLAYER1,true);
		else 
		{
			CallACS("MiscVarSetDECORATE",16,0);
			A_SetInventory("StamUsed",0,AAPTR_PLAYER1,true);
		}
	}

	// Consumes a set amount of MP/MANA when called or checks for that much for an A_JumpIf call (for Heretic's Tome-fire modes)
	void A_UseManaAttack(int amount = 0, int check = 0, int infammocheck = 0)
	{
		/*
		// Check 0 = Takes MP without a return value.
		// Check 1 = Takes NO MP and gives a return value [for just checking]
		// Check 2 = Takes MP if applicable and gives a return value
		if (check > 0)
		{
			if (infammocheck > 0 && (CheckActorInventory(Player1TID,"RandomInfiniteAmmo") > 0 || CheckActorInventory(Player1TID,"PowerInfiniteAmmo") > 0))
			{
				SetResultValue(1); 
			}
			else
			{
				if (CurrentMana >= amount) 
				{
					if (check > 1)
					{
						CurrentMana -= amount;
						if (CurrentMana < 1) CurrentMana = 0;
						MiscellaneousVars[243] = CurrentMana;
						MiscellaneousVars[238] = CurrentMana;
					}
					SetResultValue(1); 
				}
				else SetResultValue(0);
			}
		}
		else
		{
			CurrentMana -= amount;
			if (CurrentMana < 1) CurrentMana = 0;
			MiscellaneousVars[243] = CurrentMana;
			MiscellaneousVars[238] = CurrentMana;
		}
		*/
	}
	
	// Consumes a set amount of Stamina when called [1 = 0.01% stamina consumed, etc] or checks for that much for an A_JumpIf call
	void A_UseStaminaAttack(int amount = 0, int check = 0)
	{
		int stamusedebug = dvdsdebug_showstaminausestuff;
		int powertripmode = dvds_musou_powertripmode;
		int DQOomphTimer = CallACS("GetBuffTimer",10);
		int DQBuffTimer = CallACS("GetBuffTimer",11);
		int DQAcceleratleTimer = CallACS("GetBuffTimer",12);
		int DQBluntTimer = CallACS("GetBuffTimer",13);
		int DQSapTimer = CallACS("GetBuffTimer",14);
		int DQDeceleratleTimer = CallACS("GetBuffTimer",15);

		if (powertripmode == 1) amount = amount / 5;
		if (powertripmode == 2) amount = amount / 10;
		if (DQOomphTimer > 0) amount = amount * 4 / 5; // Oomph [80% consumption]
		if (DQBuffTimer > 0) amount = amount * 4 / 5; // Buff [80% consumption]
		if (DQAcceleratleTimer > 0) amount = amount * 4 / 5; // Acceleratle [80% consumption]
		if (DQBluntTimer > 0) amount = amount * 6 / 5; // Blunt [120% consumption]
		if (DQSapTimer > 0) amount = amount * 6 / 5; // Sap [120% consumption]
		if (DQDeceleratleTimer > 0) amount = amount * 6 / 5; // Deceleratle [120% consumption]
		if (CountInv("FalconKnifeEarrings", AAPTR_PLAYER1) > 0) amount = amount * 3 / 4; // Falcon Knife Earrings [75% Consumption]
		
		int whole = amount / 100; 
		int modulus = amount % 100;
		if (stamusedebug)
		{
			if (modulus > -1 && modulus < 10) Console.Printf("Stamina Used: %d.0%d%",whole, modulus);
																	 else Console.Printf("Stamina Used: %d.%d%",whole, modulus);
		}
		
		int CurrentStamina = CallACS("MiscVarCheckDECORATE",21);
		if (check > 0)
		{
			if (CurrentStamina >= amount) 
			{
				if (check > 1)
				{
					CurrentStamina -= amount;
					if (CurrentStamina < 1) CurrentStamina = 0;
					CallACS("MiscVarSetDECORATE",21,CurrentStamina);
				}
				A_SetInventory("StamUsed",1,AAPTR_PLAYER1,true);
				if (stamusedebug) Console.Printf("Stamina to be Used: Yes");
			}
			else 
			{ 
				A_SetInventory("StamUsed",0,AAPTR_PLAYER1,true); 
				if (stamusedebug) Console.Printf("Stamina to be Used: No");
			}
		}
		else
		{
			CurrentStamina -= amount;
			if (CurrentStamina < 1) CurrentStamina = 0;
			CallACS("MiscVarSetDECORATE",21,CurrentStamina);
		}
	}
	
	void A_GetPunchStaminaUse(int attacktype = 0)
	{
		int CharacterClass = CallACS("CheckCharacterClass");
		int stamusedebug = dvdsdebug_showstaminausestuff;
		int MartialArtsMastery = CallACS("MiscVarCheckDECORATE",10035);
		int MartialArtsMasteryEX = CallACS("MiscVarCheckDECORATE",10036);
		int BerserkerFit = CallACS("MiscVarCheckDECORATE",10051);
		int BerserkerFitEX = CallACS("MiscVarCheckDECORATE",10052);
		int DQOomphTimer = CallACS("GetBuffTimer",10);
		int BerserkTimer = CallACS("GetBuffTimer",23);
		int stamuse;
		int PerkFactor;
		int temp1, temp2;
		if (attacktype == 0) // Punch [normal]
		{
			if (CharacterClass == 0) stamuse = 225;
			if (CharacterClass == 1) stamuse = 250;
			if (CharacterClass == 2) stamuse = 333;
			if (CharacterClass == 9) stamuse = 298;
		}
		else
		if (attacktype == 1) // Gauntlet Punch [normal]
		{
			if (CharacterClass == 0) stamuse = 562;
			if (CharacterClass == 1) stamuse = 625;
			if (CharacterClass == 2) stamuse = 832;
			if (CharacterClass == 9) stamuse = 732;
		}
		else
		if (attacktype == 2) // Gauntlet Punch [altfire]
		{
			if (CharacterClass == 0) stamuse = 1405;
			if (CharacterClass == 1) stamuse = 1562;
			if (CharacterClass == 2) stamuse = 2081;
			if (CharacterClass == 9) stamuse = 1830;
		}
		else
		if (attacktype == 4) // Punch [uppercut]
		{
			if (CharacterClass == 0) stamuse = 374;
			if (CharacterClass == 1) stamuse = 415;
			if (CharacterClass == 2) stamuse = 553;
			if (CharacterClass == 9) stamuse = 495;
		}
		int whole = stamuse / 100; 
		int modulus = stamuse % 100;
		if (stamusedebug)
		{
			if (modulus > -1 && modulus < 10) Console.Printf("Stamina Used [Base]: %d.0%d%",whole, modulus);
																	 else Console.Printf("Stamina Used [Base]: %d.%d%",whole, modulus);
		}
		
		if (MartialArtsMastery > 0)
		{
			temp1 = 0;
			if (MartialArtsMastery == 1) temp1 = 50;
			if (MartialArtsMastery == 2) temp1 = 100;
			if (MartialArtsMastery == 3) temp1 = 175;
			if (MartialArtsMastery == 4) temp1 = 300;
			if (MartialArtsMastery >= 5) temp1 = 600;
			temp2 = 0;
			if (MartialArtsMasteryEX == 1) temp2 = 150;
			if (MartialArtsMasteryEX == 2) temp2 = 350;
			PerkFactor = 1000 - (temp1 + temp2);
			stamuse = stamuse * PerkFactor / 1000;
		}
		
		if (BerserkerFit > 0)
		{
			temp1 = 0;
			if (BerserkerFit == 1) temp1 = 50;
			if (BerserkerFit == 2) temp1 = 100;
			if (BerserkerFit == 3) temp1 = 175;
			if (BerserkerFit == 4) temp1 = 300;
			if (BerserkerFit >= 5) temp1 = 600;
			temp2 = 0;
			if (BerserkerFitEX == 1) temp2 = 150;
			if (BerserkerFitEX == 2) temp2 = 350;
			PerkFactor = 1000 - (temp1 + temp2);
			stamuse = stamuse * PerkFactor / 1000;
		}
		
		whole = stamuse / 100; 
		modulus = stamuse % 100;
		if (stamusedebug)
		{
			if (modulus > -1 && modulus < 10) Console.Printf("Stamina Used [After Perks]: %d.0%d%",whole, modulus);
																	 else Console.Printf("Stamina Used [After Perks]: %d.%d%",whole, modulus);
		}
		
		if (DQOomphTimer > 0) stamuse = stamuse * 19 / 20; // Oomph
		if (BerserkTimer > 0) stamuse = stamuse * 7 / 8; // Berserk
		whole = stamuse / 100; 
		modulus = stamuse % 100;
		if (stamusedebug)
		{
			if (modulus > -1 && modulus < 10) Console.Printf("Stamina Used [Oomph/Berserk]: %d.0%d%",whole, modulus);
																	 else Console.Printf("Stamina Used [Oomph/Berserk]: %d.%d%",whole, modulus);
		}

		A_SetInventory("StamConsumed",stamuse,AAPTR_PLAYER1,true);
	}

	void A_GetKickStaminaUse(int attacktype = 0)
	{
		int CharacterClass = CallACS("CheckCharacterClass");
		int stamusedebug = dvdsdebug_showstaminausestuff;
		int MartialArtsMastery = CallACS("MiscVarCheckDECORATE",10035);
		int MartialArtsMasteryEX = CallACS("MiscVarCheckDECORATE",10036);
		int BerserkerFit = CallACS("MiscVarCheckDECORATE",10051);
		int BerserkerFitEX = CallACS("MiscVarCheckDECORATE",10052);
		int DQOomphTimer = CallACS("GetBuffTimer",10);
		int BerserkTimer = CallACS("GetBuffTimer",23);
		int stamuse;
		int PerkFactor;
		int temp1, temp2;
		if (attacktype == 0) // Kick [normal]
		{
			if (CharacterClass == 0) stamuse = 666;
			if (CharacterClass == 1) stamuse = 500;
			if (CharacterClass == 2) stamuse = 450;
			if (CharacterClass == 9) stamuse = 300;
		}
		else
		if (attacktype == 1) // Roundhouse Kick [normal]
		{
			if (CharacterClass == 0) stamuse = 1665;
			if (CharacterClass == 1) stamuse = 1250;
			if (CharacterClass == 2) stamuse = 1125;
			if (CharacterClass == 9) stamuse = 750;
		}
		int whole = stamuse / 100; 
		int modulus = stamuse % 100;
		if (stamusedebug)
		{
			if (modulus > -1 && modulus < 10) Console.Printf("Stamina Used [Base]: %d.0%d%",whole, modulus);
																	 else Console.Printf("Stamina Used [Base]: %d.%d%",whole, modulus);
		}
		
		if (MartialArtsMastery > 0)
		{
			temp1 = 0;
			if (MartialArtsMastery == 1) temp1 = 50;
			if (MartialArtsMastery == 2) temp1 = 100;
			if (MartialArtsMastery == 3) temp1 = 175;
			if (MartialArtsMastery == 4) temp1 = 300;
			if (MartialArtsMastery >= 5) temp1 = 600;
			temp2 = 0;
			if (MartialArtsMasteryEX == 1) temp2 = 150;
			if (MartialArtsMasteryEX == 2) temp2 = 350;
			PerkFactor = 1000 - (temp1 + temp2);
			stamuse = stamuse * PerkFactor / 1000;
		}
		
		if (BerserkerFit > 0)
		{
			temp1 = 0;
			if (BerserkerFit == 1) temp1 = 50;
			if (BerserkerFit == 2) temp1 = 100;
			if (BerserkerFit == 3) temp1 = 175;
			if (BerserkerFit == 4) temp1 = 300;
			if (BerserkerFit >= 5) temp1 = 600;
			temp2 = 0;
			if (BerserkerFitEX == 1) temp2 = 150;
			if (BerserkerFitEX == 2) temp2 = 350;
			PerkFactor = 1000 - (temp1 + temp2);
			stamuse = stamuse * PerkFactor / 1000;
		}
		whole = stamuse / 100; 
		modulus = stamuse % 100;
		if (stamusedebug)
		{
			if (modulus > -1 && modulus < 10) Console.Printf("Stamina Used [After Perks]: %d.0%d%",whole, modulus);
																	 else Console.Printf("Stamina Used [After Perks]: %d.%d%",whole, modulus);
		}
		
		if (DQOomphTimer > 0) stamuse = stamuse * 19 / 20; // Oomph
		if (BerserkTimer > 0) stamuse = stamuse * 7 / 8; // Berserk
		whole = stamuse / 100; 
		modulus = stamuse % 100;
		if (stamusedebug)
		{
			if (modulus > -1 && modulus < 10) Console.Printf("Stamina Used [Oomph/Berserk]: %d.0%d%",whole, modulus);
																	 else Console.Printf("Stamina Used [Oomph/Berserk]: %d.%d%",whole, modulus);
		}

		A_SetInventory("StamConsumed",stamuse,AAPTR_PLAYER1,true);
	}

	void A_GetSceptreStaminaUse(int attacktype = 0)
	{
		int CharacterClass = CallACS("CheckCharacterClass");
		int stamusedebug = dvdsdebug_showstaminausestuff;
		int MartialArtsMastery = CallACS("MiscVarCheckDECORATE",10035);
		int MartialArtsMasteryEX = CallACS("MiscVarCheckDECORATE",10036);
		int BerserkerFit = CallACS("MiscVarCheckDECORATE",10051);
		int BerserkerFitEX = CallACS("MiscVarCheckDECORATE",10052);
		int DQOomphTimer = CallACS("GetBuffTimer",10);
		int BerserkTimer = CallACS("GetBuffTimer",23);
		int SceptreActualLevel = CallACS("OtherVarCheckDECORATE",11);
		int stamuse;
		if (attacktype == 0) // Normal Swing
		{
			if (SceptreActualLevel <= 0) stamuse = 575;
			if (SceptreActualLevel == 1) stamuse = 568; // -7
			if (SceptreActualLevel == 2) stamuse = 561; // -7
			if (SceptreActualLevel == 3) stamuse = 554; // -7
			if (SceptreActualLevel == 4) stamuse = 546; // -8
			if (SceptreActualLevel == 5) stamuse = 538; // -8
			if (SceptreActualLevel == 6) stamuse = 530; // -8
			if (SceptreActualLevel == 7) stamuse = 521; // -9
			if (SceptreActualLevel == 8) stamuse = 512; // -9
			if (SceptreActualLevel == 9) stamuse = 503; // -9
			if (SceptreActualLevel == 10) stamuse = 493; // -10
			if (SceptreActualLevel == 11) stamuse = 483; // -10
			if (SceptreActualLevel == 12) stamuse = 473; // -10
			if (SceptreActualLevel == 13) stamuse = 462; // -11
			if (SceptreActualLevel == 14) stamuse = 451; // -11
			if (SceptreActualLevel == 15) stamuse = 440; // -11
			if (SceptreActualLevel >= 16) stamuse = 428; // -12
		}
		else
		if (attacktype == 1) // Aireal Attack
		{
			if (SceptreActualLevel <= 0) stamuse = 575;
			if (SceptreActualLevel == 1) stamuse = 568; // -7
			if (SceptreActualLevel == 2) stamuse = 561; // -7
			if (SceptreActualLevel == 3) stamuse = 554; // -7
			if (SceptreActualLevel == 4) stamuse = 546; // -8
			if (SceptreActualLevel == 5) stamuse = 538; // -8
			if (SceptreActualLevel == 6) stamuse = 530; // -8
			if (SceptreActualLevel == 7) stamuse = 521; // -9
			if (SceptreActualLevel == 8) stamuse = 512; // -9
			if (SceptreActualLevel == 9) stamuse = 503; // -9
			if (SceptreActualLevel == 10) stamuse = 493; // -10
			if (SceptreActualLevel == 11) stamuse = 483; // -10
			if (SceptreActualLevel == 12) stamuse = 473; // -10
			if (SceptreActualLevel == 13) stamuse = 462; // -11
			if (SceptreActualLevel == 14) stamuse = 451; // -11
			if (SceptreActualLevel == 15) stamuse = 440; // -11
			if (SceptreActualLevel >= 16) stamuse = 428; // -12
		}
		else
		if (attacktype == 2) // Spinning Attack
		{
			if (SceptreActualLevel <= 0) stamuse = 1005;
			if (SceptreActualLevel == 1) stamuse = 996;
			if (SceptreActualLevel == 2) stamuse = 987;
			if (SceptreActualLevel == 3) stamuse = 978;
			if (SceptreActualLevel == 4) stamuse = 969;
			if (SceptreActualLevel == 5) stamuse = 960;
			if (SceptreActualLevel == 6) stamuse = 951;
			if (SceptreActualLevel == 7) stamuse = 942;
			if (SceptreActualLevel == 8) stamuse = 933;
			if (SceptreActualLevel == 9) stamuse = 924;
			if (SceptreActualLevel == 10) stamuse = 915;
			if (SceptreActualLevel == 11) stamuse = 903;
			if (SceptreActualLevel == 12) stamuse = 891;
			if (SceptreActualLevel == 13) stamuse = 879;
			if (SceptreActualLevel == 14) stamuse = 867;  
			if (SceptreActualLevel == 15) stamuse = 855;
			if (SceptreActualLevel >= 16) stamuse = 840;
		}
		int whole = stamuse / 100; 
		int modulus = stamuse % 100;
		if (stamusedebug)
		{
			if (modulus > -1 && modulus < 10) Console.Printf("Stamina Used [Base]: %d.0%d%",whole, modulus);
																	 else Console.Printf("Stamina Used [Base]: %d.%d%",whole, modulus);
		}

		if (DQOomphTimer > 0) stamuse = stamuse * 19 / 20; // Oomph
		if (BerserkTimer > 0) stamuse = stamuse * 7 / 8; // Berserk
		whole = stamuse / 100; 
		modulus = stamuse % 100;
		if (stamusedebug)
		{
			if (modulus > -1 && modulus < 10) Console.Printf("Stamina Used [Oomph/Berserk]: %d.0%d%",whole, modulus);
																	 else Console.Printf("Stamina Used [Oomph/Berserk]: %d.%d%",whole, modulus);
		}

		A_SetInventory("StamConsumed",stamuse,AAPTR_PLAYER1,true);
	}

	void A_SceptreDvAvSwing()
	{
		if (CallACS("GetBuffTimer",7) > 0) { A_SetTics(0); }
	}
	
	void A_SceptreSwingShield()
	{
		let baseRange = CallACS("GetSceptreRange", 0);
		let sceptrelevel = CallACS("GetSceptreLevel", 0);
		string reflpiece; string blckpiece;
		if (sceptrelevel >= 0 && sceptrelevel <= 4) { reflpiece = "ShieldSpawnerSwingAttack1D"; blckpiece = "ShieldSpawnerSwingAttack1"; }
		if (sceptrelevel >= 5 && sceptrelevel <= 9) { reflpiece = "ShieldSpawnerSwingAttack2D"; blckpiece = "ShieldSpawnerSwingAttack2"; }
		if (sceptrelevel >= 10 && sceptrelevel <= 13) { reflpiece = "ShieldSpawnerSwingAttack3D"; blckpiece = "ShieldSpawnerSwingAttack3"; }
		if (sceptrelevel >= 14 && sceptrelevel <= 16) { reflpiece = "ShieldSpawnerSwingAttack4D"; blckpiece = "ShieldSpawnerSwingAttack4"; }
		let maxpieces = baseRange / 32;
		for (let piece = 0; piece < maxpieces; piece++)
		{
			A_SpawnItemEx(
					piece == 0? reflpiece : blckpiece,
					(cos(-pitch) * CallACS("SetShieldPieceDist", baseRange - (piece * 32))), // xpos
					0, // ypos
					(sin(-pitch) * CallACS("SetShieldPieceDist", baseRange - (piece * 32))), // zpos
					0, // xvel
					0, // yvel
					0, // zvel
					0, // angle
					SXF_NOCHECKPOSITION, // Flags
					0, // FailChance
					0 // TID
			);
		}
	}
	
	void A_SceptreAltFireShield()
	{
		int xpos;
		int ypos;
		int zpos;
		int spawnchance = 1 - (CallACS("GetSceptreLevel",0) / 8);
		if (random(1,256) > spawnchance)
		{
			// 6 [No]
			xpos = 32; ypos = 0;
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",-8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",24) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",40) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",56) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",72) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			// 5 [No]
			xpos = 24; ypos = 16;
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",0) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",64) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			// 5 [No]
			xpos = 24; ypos = -16;
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",0) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",64) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			// 4 [No]
			xpos = 11; ypos = 32;
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",24) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",40) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",56) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			// 4 [No]
			xpos = 11; ypos = -32;
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",24) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",40) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",56) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
			
			spawnchance = 3 - ((CallACS("GetSceptreLevel",0) * 2) / 3);
			if (random(1,256) > spawnchance)
			{
				// 6 [No]
				xpos = 40; ypos = 0;
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",-8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",24) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",40) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",56) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",72) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				// 5 [No]
				xpos = 32; ypos = 16;
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",0) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",64) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				// 5 [No]
				xpos = 32; ypos = -16;
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",0) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",64) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				// 4 [No]
				xpos = 21; ypos = 32;
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",24) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",40) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",56) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				// 4 [No]
				xpos = 21; ypos = -32;
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",24) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",40) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",56) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
				
				
				spawnchance = 10 - ((CallACS("GetSceptreLevel",0) * 16) / 5);
				if (random(1,256) > spawnchance)
				{
					// 6 [Yes]
					xpos = 48; ypos = 0;
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",-8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",24) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",40) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",56) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",72) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					// 5 [Yes]
					xpos = 40; ypos = 16;
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",0) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",64) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					// 5 [Yes]
					xpos = 40; ypos = -16;
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",0) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",64) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					// 4 [Yes]
					xpos = 29; ypos = 32;
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",24) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",40) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",56) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					// 4 [Yes]
					xpos = 29; ypos = -32;
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",8) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",24) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",40) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",56) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
					
					
					spawnchance = 30 - ((CallACS("GetSceptreLevel",0) * 18) / 2);
					if (random(1,256) > spawnchance)
					{
						// 3 [No]
						xpos = 2; ypos = 40;
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						// 3 [No]
						xpos = 2; ypos = -40;
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						// 3 [No]
						xpos = 7; ypos = 40;
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						// 3 [No]
						xpos = 7; ypos = -40;
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPartNoReflect", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						// 3 [Yes]
						xpos = 24; ypos = 40;
						A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						// 3 [Yes]
						xpos = 24; ypos = -40;
						A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",16) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",xpos), ypos, CallACS("SetShieldPieceDist",48) + (sin(-pitch) * CallACS("SetShieldPieceDist",xpos)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
						
						
						
					}
				}
			}
		}
		//A_SpawnItemEx("ShieldPart", cos(-pitch) * CallACS("SetShieldPieceDist",32), 0, CallACS("SetShieldPieceDist",32) + (sin(-pitch) * CallACS("SetShieldPieceDist",32)), 0, 0, 0, 0, SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH|SXF_NOCHECKPOSITION);
	}
	
	void A_SceptreSpinningShield()
	{
		let baseRange = CallACS("GetSceptreRange", 2);
		let sceptrelevel = CallACS("GetSceptreLevel", 0);
		string reflpiece; string blckpiece;
		if (sceptrelevel >= 0 && sceptrelevel <= 8) { reflpiece = "ShieldSpawnerSpinAttack1D"; blckpiece = "ShieldSpawnerSpinAttack1"; }
		if (sceptrelevel >= 9 && sceptrelevel <= 16) { reflpiece = "ShieldSpawnerSpinAttack2D"; blckpiece = "ShieldSpawnerSpinAttack2"; }
		let maxpieces = baseRange / 32;
		for (let piece = 0; piece < maxpieces; piece++)
		{
			A_SpawnItemEx(
					piece == 0? reflpiece : blckpiece,
					(cos(-pitch) * CallACS("SetShieldPieceDist", baseRange - (piece * 32))), // xpos
					0, // ypos
					(sin(-pitch) * CallACS("SetShieldPieceDist", baseRange - (piece * 32))), // zpos
					0, // xvel
					0, // yvel
					0, // zvel
					0, // angle
					SXF_NOCHECKPOSITION, // Flags
					0, // FailChance
					0 // TID
			);
		}
	}
	
	void A_UppercutBonusTake()
	{
		A_TakeInventory("UppercutATKBonus1",9999,0,AAPTR_PLAYER1); 
		A_TakeInventory("UppercutATKBonus2",9999,0,AAPTR_PLAYER1); 
		A_TakeInventory("UppercutDEFBonus1",9999,0,AAPTR_PLAYER1); 
		A_TakeInventory("UppercutDEFBonus2",9999,0,AAPTR_PLAYER1); 
		A_TakeInventory("UppercutCritBonus1",9999,0,AAPTR_PLAYER1); 
		A_TakeInventory("UppercutCritBonus2",9999,0,AAPTR_PLAYER1); 
	}

	void A_UppercutBonus()
	{
		if (random(1,6) == 1)
		{
			A_GiveInventory("UppercutCritBonus2",1,AAPTR_PLAYER1); 
		}
		else
		{
			A_GiveInventory("UppercutCritBonus1",1,AAPTR_PLAYER1); 
		}

		if (random(1,6) == 1)
		{
			if (random(1,6) == 1)
			{
				A_GiveInventory("UppercutATKBonus2",1,AAPTR_PLAYER1); 
				A_GiveInventory("UppercutDEFBonus2",1,AAPTR_PLAYER1); 
			}
			else
			{
				A_GiveInventory("UppercutATKBonus1",1,AAPTR_PLAYER1); 
				A_GiveInventory("UppercutDEFBonus1",1,AAPTR_PLAYER1); 
			}
		}
	}
 
	// Hell Warrior Shield
	void A_PHellWarShieldOff()
	{
		if (CallACS("MiscVarCheckDECORATE",10053) >= 5) { A_SetTics(1); }
		A_TakeInventory("EWShieldDefendMode",0x7FFFFFFF);
		A_TakeInventory("EWShieldDefendModeExtra",0x7FFFFFFF);
		bREFLECTIVE = 0;
		//bSHIELDREFLECT = 0;
	}
	void A_PHellWarShieldOn()
	{
		A_GiveInventory("EWShieldDefendMode",1);
		A_TakeInventory("EWShieldDefendModeExtra",0x7FFFFFFF);
		if (random(1,4) == 1) { A_GiveInventory("EWShieldDefendModeExtra",1); } 
		bREFLECTIVE = 1;
		//bSHIELDREFLECT = 1;
	}
	
	// Fist Block Function
	void A_PFistBlockOn(int perkcheck)
	{
		A_TakeInventory("FistPlayerBlock",0x7FFFFFFF); A_TakeInventory("FistPlayerBlock2",0x7FFFFFFF); A_TakeInventory("FistPlayerBlock3",0x7FFFFFFF);
		A_TakeInventory("FistPlayerSpeedFactor",0x7FFFFFFF); A_TakeInventory("FistPlayerSpeedFactor2",0x7FFFFFFF); A_TakeInventory("FistPlayerSpeedFactor3",0x7FFFFFFF);
		if (CallACS("MiscVarCheckDECORATE",perkcheck) >= 4) { A_GiveInventory("FistPlayerBlock3",1); A_GiveInventory("FistPlayerSpeedFactor3",1); }
		else if (CallACS("MiscVarCheckDECORATE",perkcheck) >= 2) { A_GiveInventory("FistPlayerBlock2",1); A_GiveInventory("FistPlayerSpeedFactor2",1); }
		else { A_GiveInventory("FistPlayerBlock",1); A_GiveInventory("FistPlayerSpeedFactor",1); }
		A_TakeInventory("FistPlayerBlockExtra",0x7FFFFFFF);
		if (random(1,16) == 1) { A_GiveInventory("FistPlayerBlockExtra",1); } 
	}
	
	void A_PFistBlockOff()
	{
		A_TakeInventory("FistPlayerBlock",0x7FFFFFFF); A_TakeInventory("FistPlayerBlock2",0x7FFFFFFF); A_TakeInventory("FistPlayerBlock3",0x7FFFFFFF);
		A_TakeInventory("FistPlayerSpeedFactor",0x7FFFFFFF); A_TakeInventory("FistPlayerSpeedFactor2",0x7FFFFFFF); A_TakeInventory("FistPlayerSpeedFactor3",0x7FFFFFFF);
		A_TakeInventory("FistPlayerBlockExtra",0x7FFFFFFF);
		A_TakeInventory("FistPlayerBlockItem",0x7FFFFFFF);
		bREFLECTIVE = 0;
		bSHIELDREFLECT = 0;
	}
	
	void A_KickBonusOff()
	{
		A_TakeInventory("KickCritBonus1",0x7FFFFFFF);
		A_TakeInventory("KickCritBonus2",0x7FFFFFFF);
		A_TakeInventory("KickAttackDEFLvl1",0x7FFFFFFF);
		A_TakeInventory("KickAttackDEFLvl2",0x7FFFFFFF);
		A_TakeInventory("MartArtsMaster1",0x7FFFFFFF);
		A_TakeInventory("MartArtsMaster2",0x7FFFFFFF);
		A_TakeInventory("UsingMeleeAttack",0x7FFFFFFF);
	}
	
	void A_SceptreShieldOff()
	{
		A_TakeInventory("ShieldDefense",9999); A_TakeInventory("ShieldDefense2",9999); A_TakeInventory("ShieldDefense3",9999);
	}
	
	void A_SceptreShield1()
	{
		A_GiveInventory("ShieldDefense",1); A_TakeInventory("ShieldDefense2",9999); A_TakeInventory("ShieldDefense3",9999);
	}
	
	void A_SceptreShield2()
	{
		A_TakeInventory("ShieldDefense",9999); A_GiveInventory("ShieldDefense2",1); A_TakeInventory("ShieldDefense3",9999);
	}
	
	void A_SceptreShield3()
	{
		A_TakeInventory("ShieldDefense",9999); A_TakeInventory("ShieldDefense2",9999); A_GiveInventory("ShieldDefense3",1);
	}
	
	// Spread Aura Function [Projectiles]
	void A_SpreadAuraFireProjectile (Class<Actor> missiletype, double angle = 0.0, int ammouseamount = 0, string ammousetype = "", float spawnofs_horz = 0.0, int spawnheight = 0, int flags = 0, double pitch = 0.0) 
	{
		if (CountInv("SpreaderAura2") > 0)
		{
			A_FireProjectile(missiletype,angle+spread2angle2,0,spawnofs_horz+spread2horz2,spawnheight+spread2height2,flags,pitch+spread2pitch2);
			A_FireProjectile(missiletype,angle+spread2angle2,0,spawnofs_horz+spread2horz2,spawnheight+spread2height1,flags,pitch+spread2pitch1);
			A_FireProjectile(missiletype,angle+spread2angle1,0,spawnofs_horz+spread2horz1,spawnheight+spread2height1,flags,pitch+spread2pitch1);
			A_FireProjectile(missiletype,angle+spread2angle1,0,spawnofs_horz+spread2horz1,spawnheight+spread2height2,flags,pitch+spread2pitch2);
		}
		if (CountInv("SpreaderAura1") > 0 || CountInv("SpreaderAura2") > 0)
		{
			A_FireProjectile(missiletype,angle+spread1angle1,0,spawnofs_horz+spread1horz1,spawnheight+spread1height1,flags,pitch);
			A_FireProjectile(missiletype,angle+spread1angle2,0,spawnofs_horz+spread1horz2,spawnheight+spread1height1,flags,pitch);
		}
		A_FireProjectile(missiletype,angle,0,spawnofs_horz,spawnheight,flags,pitch);

		A_TakeInventory(ammousetype,ammouseamount,TIF_NOTAKEINFINITE,AAPTR_DEFAULT);
	}

	// Spread Aura Function [Projectiles w/ AOE]
	void A_SpreadAuraFireProjectileAoE (Class<Actor> missiletype, Class<Actor> missiletypeaoe, double angle = 0.0, int ammouseamount = 0, string ammousetype = "", float spawnofs_horz = 0.0, int spawnheight = 0, int flags = 0, double pitch = 0.0) 
	{
		if (CountInv("SpreaderAura2") > 0)
		{
			A_FireProjectile(missiletypeaoe,angle+spread2angle2,0,spawnofs_horz+spread2horz2,spawnheight+spread2height2,flags,pitch+spread2pitch2);
			A_FireProjectile(missiletypeaoe,angle+spread2angle2,0,spawnofs_horz+spread2horz2,spawnheight+spread2height1,flags,pitch+spread2pitch1);
			A_FireProjectile(missiletypeaoe,angle+spread2angle1,0,spawnofs_horz+spread2horz1,spawnheight+spread2height1,flags,pitch+spread2pitch1);
			A_FireProjectile(missiletypeaoe,angle+spread2angle1,0,spawnofs_horz+spread2horz1,spawnheight+spread2height2,flags,pitch+spread2pitch2);
		}
		if (CountInv("SpreaderAura1") > 0 || CountInv("SpreaderAura2") > 0)
		{
			A_FireProjectile(missiletypeaoe,angle+spread1angle1,0,spawnofs_horz+spread1horz1,spawnheight+spread1height1,flags,pitch);
			A_FireProjectile(missiletypeaoe,angle+spread1angle2,0,spawnofs_horz+spread1horz2,spawnheight+spread1height1,flags,pitch);
		}
		A_FireProjectile(missiletype,angle,0,spawnofs_horz,spawnheight,flags,pitch);

		A_TakeInventory(ammousetype,ammouseamount,TIF_NOTAKEINFINITE,AAPTR_DEFAULT);
	}

	// Spread Aura Function [Melee Punch]
	void A_SpreadAuraCustomPunch (int damage, bool norandom = 0, int flags = 0, string pufftype = "", float range = 0.0, float lifesteal = 0.0, int lifestealmax = 0, string armorbonustype = "", sound meleesound = "", sound misssound = "") 
	{
		if (CountInv("SpreaderAura2") > 0)
		{
			// Angle + 15, Pitch + 0
			A_SetAngle(angle+spread1angle2);
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			// Angle + 7.5, Pitch + 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch+spread2pitch2);
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			// Angle + 7.5, Pitch - 7.5
			A_SetPitch(pitch-spread1angle2); 
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			// Angle + 0, Pitch + 0
			A_SetPitch(pitch+spread2pitch2); A_SetAngle(angle-spread2angle2);
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			// Angle - 7.5, Pitch - 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch-spread2pitch2);
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			// Angle - 7.5, Pitch + 7.5
			A_SetPitch(pitch+spread1angle2);
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			// Angle - 15, Pitch + 0
			A_SetPitch(pitch-spread2pitch2); A_SetAngle(angle-spread2angle2);
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			// Reset
			A_SetAngle(angle+spread1angle2);
		}
		else
		if (CountInv("SpreaderAura1") > 0)
		{
			A_SetAngle(angle+spread1angle2);
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			A_SetAngle(angle-spread1angle2);
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			A_SetAngle(angle-spread1angle2);
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
			A_SetAngle(angle+spread1angle2);
		}
		else
		{
			A_CustomPunch(damage,norandom,flags,pufftype,range,lifesteal,lifestealmax,armorbonustype,meleesound,misssound);
		}
	}

	// Spread Aura Function [Melee Chainsaw]
	void A_SpreadAuraSaw (string fullsound, string hitsound = "", int damage = 0, string pufftype = "", int flags = 0, int flagscenter = 0, float range = 0.0, float spread_xy = 0.0, float spread_z = 0.0, float lifesteal = 0.0, int lifestealmax = 0, string armorbonustype = "")
	{
		if (CountInv("SpreaderAura2") > 0)
		{
			// Angle + 15, Pitch + 0
			A_SetAngle(angle+spread1angle2);
			A_Saw(fullsound,hitsound,damage,pufftype,   flags   ,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			// Angle + 7.5, Pitch + 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch+spread2pitch2);
			A_Saw(fullsound,hitsound,damage,pufftype,   flags   ,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			// Angle + 7.5, Pitch - 7.5
			A_SetPitch(pitch-spread1angle2); 
			A_Saw(fullsound,hitsound,damage,pufftype,   flags   ,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			// Angle + 0, Pitch + 0
			A_SetPitch(pitch+spread2pitch2); A_SetAngle(angle-spread2angle2);
			A_Saw(fullsound,hitsound,damage,pufftype,flagscenter,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			// Angle - 7.5, Pitch - 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch-spread2pitch2);
			A_Saw(fullsound,hitsound,damage,pufftype,   flags   ,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			// Angle - 7.5, Pitch + 7.5
			A_SetPitch(pitch+spread1angle2);
			A_Saw(fullsound,hitsound,damage,pufftype,   flags   ,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			// Angle - 15, Pitch + 0
			A_SetPitch(pitch-spread2pitch2); A_SetAngle(angle-spread2angle2);
			A_Saw(fullsound,hitsound,damage,pufftype,   flags   ,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			// Reset
			A_SetAngle(angle+spread1angle2);
		}
		else
		if (CountInv("SpreaderAura1") > 0)
		{
			A_SetAngle(angle+spread1angle2);
			A_Saw(fullsound,hitsound,damage,pufftype,   flags   ,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			A_SetAngle(angle-spread1angle2);
			A_Saw(fullsound,hitsound,damage,pufftype,flagscenter,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			A_SetAngle(angle-spread1angle2);
			A_Saw(fullsound,hitsound,damage,pufftype,   flags   ,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
			A_SetAngle(angle+spread1angle2);
		}
		else
		{
			A_Saw(fullsound,hitsound,damage,pufftype,flagscenter,range,spread_xy,spread_z,lifesteal,lifestealmax,armorbonustype);
		}
	}

	// Spread Aura Function [Hitscan]
	void A_SpreadAuraFireBullets (double spread_horz, double spread_vert, int numbullets, int damage, string pufftype = "", int flags = 0, int flagscenter = 0, float range = 8192, string missile = "", float spawnheight = 0.0, float spawnofs_xy = 0.0, int ammouseamount = 0, string ammousetype = "")
	{
		int user_pelletsfired;
		if (CountInv("SpreaderAura2") > 0)
		{
			// Angle + 15, Pitch + 0
			A_SetAngle(angle+spread1angle2);
			for (user_pelletsfired = 0; user_pelletsfired < numbullets; user_pelletsfired++) A_FireBullets (spread_horz,spread_vert,1,damage,pufftype,   flags   ,range,missile,spawnheight,spawnofs_xy);
			// Angle + 7.5, Pitch + 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch+spread2pitch2);
			for (user_pelletsfired = 0; user_pelletsfired < numbullets; user_pelletsfired++) A_FireBullets (spread_horz,spread_vert,1,damage,pufftype,   flags   ,range,missile,spawnheight,spawnofs_xy);
			// Angle + 7.5, Pitch - 7.5
			A_SetPitch(pitch-spread1angle2); 
			for (user_pelletsfired = 0; user_pelletsfired < numbullets; user_pelletsfired++) A_FireBullets (spread_horz,spread_vert,1,damage,pufftype,   flags   ,range,missile,spawnheight,spawnofs_xy);
			// Angle + 0, Pitch + 0
			A_SetPitch(pitch+spread2pitch2); A_SetAngle(angle-spread2angle2);
			for (user_pelletsfired = 0; user_pelletsfired < numbullets; user_pelletsfired++) A_FireBullets (spread_horz,spread_vert,1,damage,pufftype,flagscenter,range,missile,spawnheight,spawnofs_xy);
			// Angle - 7.5, Pitch - 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch-spread2pitch2);
			for (user_pelletsfired = 0; user_pelletsfired < numbullets; user_pelletsfired++) A_FireBullets (spread_horz,spread_vert,1,damage,pufftype,   flags   ,range,missile,spawnheight,spawnofs_xy);
			// Angle - 7.5, Pitch + 7.5
			A_SetPitch(pitch+spread1angle2);
			for (user_pelletsfired = 0; user_pelletsfired < numbullets; user_pelletsfired++) A_FireBullets (spread_horz,spread_vert,1,damage,pufftype,   flags   ,range,missile,spawnheight,spawnofs_xy);
			// Angle - 15, Pitch + 0
			A_SetPitch(pitch-spread2pitch2); A_SetAngle(angle-spread2angle2);
			for (user_pelletsfired = 0; user_pelletsfired < numbullets; user_pelletsfired++) A_FireBullets (spread_horz,spread_vert,1,damage,pufftype,   flags   ,range,missile,spawnheight,spawnofs_xy);
			// Reset
			A_SetAngle(angle+spread1angle2);
		}
		else
		if (CountInv("SpreaderAura1") > 0)
		{
			A_SetAngle(angle+spread1angle2);
			A_FireBullets (spread_horz,spread_vert,numbullets,damage,pufftype,   flags   ,range,missile,spawnheight,spawnofs_xy);
			A_SetAngle(angle-spread1angle2);
			A_FireBullets (spread_horz,spread_vert,numbullets,damage,pufftype,flagscenter,range,missile,spawnheight,spawnofs_xy);
			A_SetAngle(angle-spread1angle2);
			A_FireBullets (spread_horz,spread_vert,numbullets,damage,pufftype,   flags   ,range,missile,spawnheight,spawnofs_xy);
			A_SetAngle(angle+spread1angle2);
		}
		else
		{
			A_FireBullets (spread_horz,spread_vert,numbullets,damage,pufftype,flagscenter,range,missile,spawnheight,spawnofs_xy);
		}
		A_TakeInventory(ammousetype,ammouseamount,TIF_NOTAKEINFINITE,AAPTR_DEFAULT);
	}

	// Spread Aura Function [Railgun]
	void A_SpreadAuraRailAttack (int damage, int spawnofs_xy = 0, int ammouseamount = 0, string ammousetype = "", color ringcolor = 0, color corecolor = 0, int flags = 0, int maxdiff = 0, string pufftype = "", float spread_xy = 0.0, float spread_z = 0.0, int range = 8192, int duration = 35, float sparsity = 1.0, float driftspeed = 1.0, string spawnclass = "", float spawnofs_z = 0.0, int spiraloffset = 270, int limit = 0) 
	{
		if (CountInv("SpreaderAura2") > 0)
		{
			// Angle + 15, Pitch + 0
			A_SetAngle(angle+spread1angle2);
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			// Angle + 7.5, Pitch + 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch+spread2pitch2);
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			// Angle + 7.5, Pitch - 7.5
			A_SetPitch(pitch-spread1angle2); 
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			// Angle + 0, Pitch + 0
			A_SetPitch(pitch+spread2pitch2); A_SetAngle(angle-spread2angle2);
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			// Angle - 7.5, Pitch - 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch-spread2pitch2);
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			// Angle - 7.5, Pitch + 7.5
			A_SetPitch(pitch+spread1angle2);
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			// Angle - 15, Pitch + 0
			A_SetPitch(pitch-spread2pitch2); A_SetAngle(angle-spread2angle2);
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			// Reset
			A_SetAngle(angle+spread1angle2);
		}
		else
		if (CountInv("SpreaderAura1") > 0)
		{
			A_SetAngle(angle+spread1angle2);
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			A_SetAngle(angle-spread1angle2);
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			A_SetAngle(angle-spread1angle2);
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
			A_SetAngle(angle+spread1angle2);
		}
		else
		{
			A_RailAttack (damage,spawnofs_xy,0,ringcolor,corecolor,flags,maxdiff,pufftype,spread_xy,spread_z,range,duration,sparsity,driftspeed,spawnclass,spawnofs_z,spiraloffset,limit);
		}
		A_TakeInventory(ammousetype,ammouseamount,TIF_NOTAKEINFINITE,AAPTR_DEFAULT);
	}
	
	// Used to Create Multiple "Shields" for Punches/Melee when Spreader Aura is active
	void A_MeleeShieldPiece(string attackname = "", int spawnheight = 32, int spawndistance = 0)
	{
		if (CountInv("SpreaderAura2") > 0)
		{
			// Angle + 15, Pitch + 0
			A_SetAngle(angle+spread1angle2);
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			// Angle + 7.5, Pitch + 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch+spread2pitch2);
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			// Angle + 7.5, Pitch - 7.5
			A_SetPitch(pitch-spread1angle2); 
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			// Angle + 0, Pitch + 0
			A_SetPitch(pitch+spread2pitch2); A_SetAngle(angle-spread2angle2);
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			// Angle - 7.5, Pitch - 7.5
			A_SetAngle(angle-spread2angle2); A_SetPitch(pitch-spread2pitch2);
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			// Angle - 7.5, Pitch + 7.5
			A_SetPitch(pitch+spread1angle2);
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			// Angle - 15, Pitch + 0
			A_SetPitch(pitch-spread2pitch2); A_SetAngle(angle-spread2angle2);
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			// Reset
			A_SetAngle(angle+spread1angle2);
		}
		else
		if (CountInv("SpreaderAura1") > 0)
		{
			A_SetAngle(angle+spread1angle2);
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			A_SetAngle(angle-spread1angle2);
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			A_SetAngle(angle-spread1angle2);
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
			A_SetAngle(angle+spread1angle2);
		}
		else
		{
			A_SpawnItemEx(attackname, cos(-pitch) * CallACS("SetShieldPieceDist",spawndistance), 0, CallACS("SetShieldPieceDist",spawnheight) + (sin(-pitch) * CallACS("SetShieldPieceDist",spawndistance)), 0, 0, 0, 0, SXF_NOCHECKPOSITION);
		}
	}
	
	// Used for Hellcore weapons to allow them to shoot Crisis attacks when the player's health is low. :V
	void A_HellCoreCrisisCheck (void)
	{
		A_TakeInventory("PlayerCanUseCrisisAttacks",9999,AAPTR_PLAYER1); 
		if (CountInv("CriticalHealth",AAPTR_PLAYER1) > 0) 
		{
			A_GiveInventory("PlayerCanUseCrisisAttacks",1,AAPTR_PLAYER1); 
		}
		else 
		{
			if (CountInv("LowHealth",AAPTR_PLAYER1) > 0 && random(1,4) == 4) 
			{
				A_GiveInventory("PlayerCanUseCrisisAttacks",1,AAPTR_PLAYER1); 
			}
		}
	}

	void A_PlayCrisisAtkSound ()
	{
		A_PlaySound("crisisattack",6);
		A_PlaySound("crisisattack2",7);
	}
}

// To allow class gathering for weapons that allow Quick-Kicking :V
class QuickMeleeWeaponZSC : AetheriusBaseWeaponZSC
{
}

class AetheriusBaseCustomInventoryZSC : CustomInventory 
{
	// Spreader Aura Level 1 Angles
	const spread1angle1 = -15.0;
	const spread1angle2 = 15.0;
	const spread1horz1 = 0.0;
	const spread1horz2 = 0.0;
	const spread1height1 = 0.0;
	const spread1height2 = 0.0;

	// Spreader Aura Level 2 Angles/Pitches
	const spread2angle1 = -7.5;
	const spread2angle2 = 7.5;
	const spread2horz1 = 0.0;
	const spread2horz2 = 0.0;
	const spread2pitch1 = -7.5;
	const spread2pitch2 = 7.5;
	const spread2height1 = 0.0;
	const spread2height2 = 0.0;

	// Spread Aura Function [Projectiles]
	void A_SpreadAuraFireProjectile (Class<Actor> missiletype, double angle = 0.0, int ammouseamount = 0, string ammousetype = "", float spawnofs_horz = 0.0, int spawnheight = 0, int flags = 0, double pitch = 0.0) 
	{
		if (CountInv("SpreaderAura2") > 0)
		{
			A_FireProjectile(missiletype,angle+spread2angle2,0,spawnofs_horz+spread2horz2,spawnheight+spread2height2,flags,pitch+spread2pitch2);
			A_FireProjectile(missiletype,angle+spread2angle2,0,spawnofs_horz+spread2horz2,spawnheight+spread2height1,flags,pitch+spread2pitch1);
			A_FireProjectile(missiletype,angle+spread2angle1,0,spawnofs_horz+spread2horz1,spawnheight+spread2height1,flags,pitch+spread2pitch1);
			A_FireProjectile(missiletype,angle+spread2angle1,0,spawnofs_horz+spread2horz1,spawnheight+spread2height2,flags,pitch+spread2pitch2);
		}
		if (CountInv("SpreaderAura1") > 0 || CountInv("SpreaderAura2") > 0)
		{
			A_FireProjectile(missiletype,angle+spread1angle1,0,spawnofs_horz+spread1horz1,spawnheight+spread1height1,flags,pitch);
			A_FireProjectile(missiletype,angle+spread1angle2,0,spawnofs_horz+spread1horz2,spawnheight+spread1height1,flags,pitch);
		}
		A_FireProjectile(missiletype,angle,0,spawnofs_horz,spawnheight,flags,pitch);

		A_TakeInventory(ammousetype,ammouseamount,TIF_NOTAKEINFINITE,AAPTR_DEFAULT);
	}

}

